function ponchoTable(opt){var filtroColumna,id,listado=[],filteredTitle=[],filteredTitleGsx=[],filtro=[],titulos="",th=[],lista="";function getSheetValues(url){jQuery.getJSON(url,function(data){listado=data.values,jQuery.each(Object.keys(listado[0]),function(index,key){listado[0][key]&&(filteredTitle.push(listado[0][key]),filteredTitleGsx.push(key),titulos+="<th>"+listado[1][key]+"</th>",th.push(listado[1][key]))}),jQuery("#ponchoTable caption").html(opt.tituloTabla),jQuery("#ponchoTable thead tr").empty(),jQuery("#ponchoTable thead tr").append(titulos),jQuery.each(listado,function(row,value){if(row>1){var concatenado="",thisRow="";jQuery.each(filteredTitle,function(index,title){var tdEmpty="",filas=listado[row][index];if(filteredTitle[index].includes("btn-")&&filas){var nameBtn=listado[0][index].replace("btn-","").replace("-"," ");filas='<a aria-label="'+nameBtn+'" class="btn btn-primary btn-sm margin-btn" target="_blank" href="'+filas+'">'+nameBtn+"</a>"}if(filteredTitle[index].includes("filtro-")&&filas){filtroColumna=index;var nameFiltro=listado[1][index];jQuery("#tituloFiltro").html(nameFiltro),filtro.push(filas)}if(filteredTitle[index].includes("fecha-")&&filas){var dateSplit=filas.split("/");filas='<span style="display:none;">'+new Date(dateSplit[2],dateSplit[1]-1,dateSplit[0]).toISOString().split("T")[0]+"</span>"+filas}filas||(filas="",tdEmpty="hidden-xs"),concatenado+=filas,filas=(new showdown.Converter).makeHtml(filas),thisRow+='<td class="'+tdEmpty+'" data-title="'+th[index]+'">'+filas+"</td>"}),""!=concatenado&&(lista+="<tr>",lista+=thisRow,lista+="</tr>")}}),jQuery.each(filtro.filter(function(el,index,arr){return index===arr.indexOf(el)}),function(index,val){jQuery("#ponchoTableFiltro").append("<option>"+val+"</option>")}),jQuery("#ponchoTable tbody").empty(),jQuery("#ponchoTableSearchCont").show(),jQuery("#ponchoTable tbody").append(lista),jQuery("#ponchoTable").removeClass("state-loading"),function(){function removeAccents(data){return data.replace(/έ/g,"ε").replace(/[ύϋΰ]/g,"υ").replace(/ό/g,"ο").replace(/ώ/g,"ω").replace(/ά/g,"α").replace(/[ίϊΐ]/g,"ι").replace(/ή/g,"η").replace(/\n/g," ").replace(/[áÁ]/g,"a").replace(/[éÉ]/g,"e").replace(/[íÍ]/g,"i").replace(/[óÓ]/g,"o").replace(/[úÚ]/g,"u").replace(/ê/g,"e").replace(/î/g,"i").replace(/ô/g,"o").replace(/è/g,"e").replace(/ï/g,"i").replace(/ü/g,"u").replace(/ã/g,"a").replace(/õ/g,"o").replace(/ç/g,"c").replace(/ì/g,"i")}var searchType=jQuery.fn.DataTable.ext.type.search;searchType.string=function(data){return data?"string"==typeof data?removeAccents(data):data:""},searchType.html=function(data){return data?"string"==typeof data?removeAccents(data.replace(/<.*?>/g,"")):data:""},jQuery.isFunction(jQuery.fn.DataTable.ext.order.intl)&&(jQuery.fn.DataTable.ext.order.intl("es"),jQuery.fn.DataTable.ext.order.htmlIntl("es"));var tabla=jQuery("#ponchoTable").DataTable({lengthChange:!1,autoWidth:!1,pageLength:opt.cantidadItems,columnDefs:[{type:"html-num",targets:opt.tipoNumero},{targets:opt.ocultarColumnas,visible:!1}],ordering:opt.orden,order:[[opt.ordenColumna-1,opt.ordenTipo]],dom:"<'row'<'col-sm-6'l><'col-sm-6'f>><'row'<'col-sm-12'i>><'row'<'col-sm-12'tr>><'row'<'col-md-offset-3 col-md-6 col-sm-offset-2 col-sm-8'p>>",language:{sProcessing:"Procesando...",sLengthMenu:"Mostrar _MENU_ registros",sZeroRecords:"No se encontraron resultados",sEmptyTable:"Ningún dato disponible en esta tabla",sInfo:"_TOTAL_ resultados",sInfoEmpty:"No hay resultados",sInfoFiltered:"",sInfoPostFix:"",sSearch:"Buscar:",sUrl:"",sInfoThousands:".",sLoadingRecords:"Cargando...",oPaginate:{sFirst:"<<",sLast:">>",sNext:">",sPrevious:"<"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente",paginate:{first:"Ir a la primera página",previous:"Ir a la página anterior",next:"Ir a la página siguiente",last:"Ir a la última página"}}}});jQuery(document).ready(function(){jQuery("#ponchoTableSearch").keyup(function(){tabla.search(jQuery.fn.DataTable.ext.type.search.string(this.value)).draw()})}),jQuery("#ponchoTable_filter").parent().parent().remove(),jQuery("#ponchoTableFiltro option").length>1&&jQuery("#ponchoTableFiltroCont").show();jQuery("#ponchoTableFiltro").on("change",function(){var filtro=jQuery.fn.DataTable.ext.type.search.string(jQuery(this).val());""!=filtro?tabla.column(filtroColumna).every(function(){this.search(filtro?"^"+filtro+"$":"",!0,!1).draw()}):tabla.search("").columns().search("").draw()})}()})}jQuery.fn.DataTable.isDataTable("#ponchoTable")&&jQuery("#ponchoTable").DataTable().destroy(),opt.jsonUrl?getSheetValues(opt.jsonUrl):(id=opt.hojaNumero,jQuery.getJSON("https://sheets.googleapis.com/v4/spreadsheets/"+opt.idSpread+"/?alt=json&key=AIzaSyCq2wEEKL9-6RmX-TkW23qJsrmnFHFf5tY",function(response){var sheetName=response.sheets[id-1].properties.title;getSheetValues("https://sheets.googleapis.com/v4/spreadsheets/"+opt.idSpread+"/values/"+sheetName+"?alt=json&key=AIzaSyCq2wEEKL9-6RmX-TkW23qJsrmnFHFf5tY")}))}jQuery("#ponchoTable").addClass("state-loading");var opt={tipoMapa:"roadmap"};function ponchoMaps(opt){var puntos,mapOptions={center:{lat:-39.6930895,lng:-57.2432742},zoom:5,mapTypeId:opt.tipoMapa,styles:[{featureType:"administrative.country",stylers:[{visibility:"on"}]},{featureType:"poi",stylers:[{visibility:"off"}]}]},map=new google.maps.Map(document.getElementById("map"),mapOptions);jQuery.getJSON("https://spreadsheets.google.com/feeds/list/"+opt.idSpreadheet+"/"+opt.hojaNumero+"/public/values?alt=json",function(data){var autores=["metricas.mod@gmail.com","modernizacion.ux@gmail.com","contenidosgobar@gmail.com"];jQuery.each(data.feed.author,function(index,val){-1==autores.indexOf(val.email.$t)&&(jQuery("body").remove(),window.location.replace("http://www.argentina.gob.ar"))}),puntos=data.feed.entry;var markers=[],detalles=[],template=['<?xml version="1.0"?>','<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="286.818px" height="396.798px" viewBox="63.14 8.15 286.818 396.798" enable-background="new 63.14 8.15 286.818 396.798" xml:space="preserve">','<path stroke="#FFF" stroke-width="10" fill="{{ color }}" d="M206.549,20.359L206.549,20.359c-74.459,0-134.584,60.126-134.584,134.584c0,25.961,8.293,50.751,19.832,71.122l87.71,151.801c5.499,9.916,16.586,14.874,27.043,14.874c10.458,0,21.003-4.958,27.043-14.874l87.71-151.711c11.629-20.373,19.832-44.712,19.832-71.124C341.133,80.574,281.008,20.359,206.549,20.359z M206.549,206.978c-33.804,0-61.41-27.606-61.41-61.41s27.606-61.41,61.41-61.41s61.41,27.606,61.41,61.41C267.959,179.484,240.353,206.978,206.549,206.978z"/>',"</svg>"].join("\n"),colores={azul:{hex:"#0072BB"},verde:{hex:"#2E7D33"},rojo:{hex:"#C62828"},gris:{hex:"#707070"},fucsia:{hex:"#EC407A"},arandano:{hex:"#C2185B"},uva:{hex:"#6A1B99"},cielo:{hex:"#039BE5"},verdin:{hex:"#6EA100"},lima:{hex:"#CDDC39"},maiz:{hex:"#FFCE00"},tomate:{hex:"#EF5350"},"naranja oscuro":{hex:"#EF6C00"},"verde azulado":{hex:"#008388"}};jQuery.each(puntos,function(key,punto){var color=punto.gsx$color.$t.toLowerCase(),svg=template.replace("{{ color }}",colores[color].hex),latLng=new google.maps.LatLng(punto.gsx$latitud.$t,punto.gsx$longitud.$t),marker=new google.maps.Marker({position:latLng,title:punto.gsx$nombre.$t,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(svg),scaledSize:new google.maps.Size(40,40)},optimized:!1});markers.push(marker);var telefono="",email="",boton="",descripcion="",ubicacion="",foto="";(""==punto.gsx$provincia.$t&&""==punto.gsx$localidad.$t||(ubicacion='<div class="separarGuiones"><i class="fa fa-map-marker"></i><span>'+punto.gsx$direccion.$t+"</span><span>"+punto.gsx$localidad.$t+"</span><span>"+punto.gsx$provincia.$t+"</span></div>"),""!=punto.gsx$telefono.$t&&(telefono="<div><i class='fa fa-phone'></i>"+punto.gsx$telefono.$t+"</div>"),""!=punto.gsx$email.$t&&(email="<div><i class='fa fa-envelope'></i>"+punto.gsx$email.$t+"</div>"),""!=punto.gsx$descripcion.$t)&&(descripcion="<div>"+(new showdown.Converter).makeHtml(punto.gsx$descripcion.$t)+"</div>");""!=punto.gsx$boton.$t&&(boton="<hr><a class='btn btn-success btn-sm' href="+punto.gsx$boton.$t+">"+opt.textoBoton+"</a>"),null!=punto.gsx$foto&&(foto='<img width="100%" src="'+punto.gsx$foto.$t+'">'),detalles[key]=new google.maps.InfoWindow({content:'<div class="media"><div class="media-body"><small class="text-primary">'+punto.gsx$tipo.$t+"</small><h4>"+punto.gsx$nombre.$t+"</h4> "+foto+descripcion+ubicacion+telefono+email+boton+"</div></div>",maxWidth:300}),markers[key].addListener("click",function(){closeWindows(),detalles[key].open(map,markers[key])}),jQuery("#map-container").removeClass("state-loading"),marker.setMap(map)});var closeWindows=function(){for(var i=0;i<detalles.length;i++)detalles[i].close()};if("si"==opt.agrupar)new MarkerClusterer(map,markers,{enableRetinaIcons:!0,imageSizes:[20,30,40,50,60,70],maxZoom:10,gridSize:50,styles:[{textColor:"white",url:"https://www.argentina.gob.ar/sites/default/files/cluster_ponchomaps.png",width:45,height:45}]})})}var content_popover=document.getElementById("content-popover");function popshow(){content_popover.classList.toggle("hidden")}function pophidde(){content_popover.classList.add("hidden")}var ponchoUbicacion=function(options){var provincias,localidades,sProvincia,sLocalidades,urlProvincias=options.json_provincias?options.json_provincias:"/profiles/argentinagobar/themes/contrib/poncho/resources/jsons/geoprovincias.json",urlLocalidades=options.json_localidades?options.json_localidades:"/profiles/argentinagobar/themes/contrib/poncho/resources/jsons/geolocalidades.json",iProvincia=jQuery('input[name="submitted['+options.provincia+']"]'),iLocalidad=jQuery('input[name="submitted['+options.localidad+']"]');function capitalizeFirstLetter(string){return string.charAt(0).toUpperCase()+string.slice(1)}function getDropDownList(name,id,optionList,required=!1,emptyOption=!1,selected_item=!1){var combo=jQuery("<select></select>").attr("id",id).attr("name",name).addClass("form-control form-select").prop("required",required);return emptyOption&&combo.append("<option value=''>Seleccione una opción</option>"),jQuery.each(optionList,function(i,el){let selected="";selected_item==el.nombre&&(selected='selected="selected"'),combo.append("<option value='"+el.id+"' "+selected+">"+el.nombre+"</option>")}),combo}function getSelectLocalidades(localidades,provincia){var required=iLocalidad.prop("required"),select=getDropDownList("sLocalidades","sLocalidades",[],required,!0,!1);return iProvincia.val()&&(select=getDropDownList("sLocalidades","sLocalidades",localidades.filter(function(localidad){return String(localidad.provincia.id)==String(provincia)}).map(function(a){return a.departamento.nombre&&(a.nombre=capitalizeFirstLetter(a.departamento.nombre.toLowerCase())+" - "+capitalizeFirstLetter(a.nombre.toLowerCase())),a}).sort(function(a,b){var nameA=a.nombre.toUpperCase(),nameB=b.nombre.toUpperCase();return nameA.localeCompare(nameB)}),required,!0,iLocalidad.val())),select}urlProvincias=options.urlProvincias?options.urlProvincias:urlProvincias,urlLocalidades=options.urlLocalidades?options.urlLocalidades:urlLocalidades,jQuery.getJSON(urlProvincias,function(data){provincias=function(data){return provincias=[],data.results.forEach(function(provincia,index){provincias.push(provincia)}),provincias}(data),(sProvincia=function(provincias){var provinciasOptions=[];provinciasOptions=provincias.sort(function(a,b){var nameA=a.nombre.toUpperCase(),nameB=b.nombre.toUpperCase();return nameA.localeCompare(nameB)});var required=iProvincia.prop("required");return getDropDownList("sProvincias","sProvincias",provinciasOptions,required,!0,iProvincia.val())}(provincias)).on("change",function(e){if(iProvincia.val(""),iLocalidad.val(""),sLocalidades.children("option:not(:first)").remove(),""!=sProvincia.val()){iProvincia.val(sProvincia.find(":selected").text());var sAux=getSelectLocalidades(localidades,sProvincia.val()),sOpt=sAux.find("option");sLocalidades.append(sOpt),sLocalidades.val("")}}),iProvincia.after(sProvincia),jQuery(sProvincia).select2()}),jQuery.getJSON(urlLocalidades,function(data){localidades=function(data){return localidades=[],data.results.forEach(function(localidad,index){localidades.push(localidad)}),localidades}(data),(sLocalidades=getSelectLocalidades(localidades,sProvincia.val())).on("change",function(e){iLocalidad.val(""),""!=sLocalidades.val()&&iLocalidad.val(sLocalidades.find(":selected").text())}),iLocalidad.after(sLocalidades),jQuery(sLocalidades).select2()}),iProvincia.hide(),iLocalidad.hide()};function ponchoChart(opt){"use strict";if(function(opt){var chequeo=!1;(opt.idSpread&&opt.hojaNombre||opt.jsonUrl||opt.jsonInput)&&void 0!==opt.tipoGrafico&&""!=opt.tipoGrafico&&void 0!==opt.idComponenteGrafico&&""!=opt.idComponenteGrafico&&""!=getTipoGrafico(opt.tipoGrafico)&&(chequeo=!0);return chequeo}(opt))if(opt.jsonInput)console.log(opt.jsonInput),drawChart(jQuery.parseJSON(opt.jsonInput),opt);else{var url=opt.jsonUrl?opt.jsonUrl:"https://sheets.googleapis.com/v4/spreadsheets/"+opt.idSpread+"/values/"+opt.hojaNombre+"?alt=json&key=AIzaSyCq2wEEKL9-6RmX-TkW23qJsrmnFHFf5tY";jQuery.getJSON(url,function(data){drawChart(data,opt)})}else void 0!==opt.idSpread&&""!=opt.idSpread||console.log("Completar valor para la opción de Configuración idSpread"),void 0!==opt.hojaNombre&&""!=opt.hojaNombre||console.log("Completar valor para la opción de Configuración hojaNombre"),void 0!==opt.tipoGrafico&&""!=opt.tipoGrafico||console.log("Completar valor para la opción de Configuración tipoGrafico"),void 0!==opt.idComponenteGrafico&&""!=opt.idComponenteGrafico||console.log("Completar valor para la opción de Configuración idComponenteGrafico"),""==getTipoGrafico(opt.tipoGrafico)&&console.log("Ingrese un tipo de gafico válido");function getTipoGrafico(tipo){var grafico="";return"Line"==tipo&&(grafico="line"),"Bar"==tipo&&(grafico="bar"),"Pie"==tipo&&(grafico="pie"),"Area"==tipo&&(grafico="line"),"Horizontal Bar"==tipo&&(grafico="horizontalBar"),"Stacked Bar"==tipo&&(grafico="bar"),"Mixed"==tipo&&(grafico="mixed"),"HeatMap"==tipo&&(grafico="heatmap"),grafico}function getColor(color){var codigoColor="";switch(color){case"celeste":codigoColor="#2897d4";break;case"verde":codigoColor="#2e7d33";break;case"rojo":codigoColor="#c62828";break;case"amarillo":codigoColor="#f9a822";break;case"azul":codigoColor="#0072bb";break;case"negro":codigoColor="#333";break;case"uva":codigoColor="#6a1b99";break;case"gris":codigoColor="#525252";break;case"grisintermedio":codigoColor="#f2f2f2";break;case"celesteargentina":codigoColor="#37bbed";break;case"fucsia":codigoColor="#ec407a";break;case"arandano":codigoColor="#c2185b";break;case"uva":codigoColor="#6a1b99";break;case"cielo":codigoColor="#039be5";break;case"verdin":codigoColor="#6ea100";break;case"lima":codigoColor="#cddc39";break;case"maíz":codigoColor="#ffce00";break;case"tomate":codigoColor="#ef5350";break;case"naranjaoscuro":codigoColor="#EF6C00";break;case"verdeazulado":codigoColor="#008388";break;case"escarapela":codigoColor="#2cb9ee";break;case"lavanda":codigoColor="#9284be";break;case"mandarina":codigoColor="#f79525";break;case"palta":codigoColor="#50b7b2";break;case"cereza":codigoColor="#ed3d8f";break;case"limon":codigoColor="#d7df23";break;case"verdejade":codigoColor="#066";break;case"verdealoe":codigoColor="#4fbb73";break;case"verdecemento":codigoColor="#b4beba";break;default:console.log("No existe color "+color)}return codigoColor}function numeroFormateado(numero){var value=numero.toString().replace(".",","),array=value.split(","),result1=new Intl.NumberFormat("es-AR",{maximumFractionDigits:2}).format(array[0]);return value=array.length>1?result1.concat(",",array[1].substr(0,2)):result1}function drawChart(data,opt){var etiquetas=[],filteredTitleName=[],filteredTitlePos=[],color="",colores=[],codigosColores=[],columnas=[],valores=[],datos=[],cantDatos=0,toltips="",tipoGraficosMixed=[],indicePorcentajeMixed=0,porcentajesMixed=[],labelsYCortos=[],indiceNombreCorto=0,posicionLeyendas=opt.posicionLeyendas?opt.posicionLeyendas:"top",mostrarLeyendas="";mostrarLeyendas=void 0===opt.mostrarLeyendas||opt.mostrarLeyendas;var mostrarTotal="";mostrarTotal=void 0===opt.mostrarTotalStacked||opt.mostrarTotalStacked;var idTag,titulo,tipoGrafico=getTipoGrafico(opt.tipoGrafico),listado=data.values;if(jQuery.each(Object.keys(listado[0]),function(index,key){if("eje-y"==listado[0][index].substr(0,5)){var split=listado[0][index].split("-"),pos=split[0]+split[1];filteredTitleName.push(pos),filteredTitlePos.push(index)}else"nombre-corto"==listado[0][index]&&"heatmap"==tipoGrafico&&(indiceNombreCorto=index)}),jQuery.each(listado,function(row,value){if(0==row&&jQuery.each(filteredTitlePos,function(index,title){var split=listado[row][filteredTitlePos[index]].split("-"),pos=split[0]+split[1];valores[pos]=[],colores.push(split[2]),"mixed"==tipoGrafico&&(split.length>3&&("barra"==split[3]||"linea"==split[3])?tipoGraficosMixed.push(split[3]):(0==index&&tipoGraficosMixed.push("barra"),1==index&&tipoGraficosMixed.push("linea")))}),1==row&&jQuery.each(filteredTitlePos,function(index,title){"pie"!=tipoGrafico?"heatmap"==tipoGrafico?etiquetas.push(listado[row][filteredTitlePos[index]]):(columnas.push(listado[row][filteredTitlePos[index]]),cantDatos+=1):etiquetas.push(listado[row][filteredTitlePos[index]])}),row>1){var label=!1;jQuery.each(filteredTitlePos,function(index,title){var split=listado[0][filteredTitlePos[index]].split("-"),pos=split[0]+split[1];"pie"==tipoGrafico?valores[pos].push(listado[row][filteredTitlePos[index]]):"heatmap"==tipoGrafico?(0==label&&(columnas.push(listado[row][0]),label=!0,cantDatos+=1),index!=indiceNombreCorto&&valores[pos].push(listado[row][filteredTitlePos[index]]),index+2==indiceNombreCorto&&(void 0===listado[row][index+2]?labelsYCortos.push("*"):labelsYCortos.push(listado[row][index+2]))):(0==label&&(etiquetas.push(listado[row][0]),label=!0),valores[pos].push(listado[row][filteredTitlePos[index]]))})}}),"pie"==tipoGrafico){var datosTorta=[];jQuery.each(Object.keys(filteredTitleName),function(index,key){var pos=filteredTitleName[index];valores.hasOwnProperty(pos)&&datosTorta.push(valores[pos])}),datos=datosTorta}else 1==cantDatos&&jQuery.each(Object.keys(filteredTitleName),function(index,key){var pos=filteredTitleName[index];valores.hasOwnProperty(pos)&&(datos=valores[pos])});if("mixed"==tipoGrafico){var cadena=opt.porcentajesMixed?opt.porcentajesMixed:"";cadena.length>0&&(porcentajesMixed=cadena.split(","))}if(toltips=1==opt.porcentajes?"line"==tipoGrafico&&cantDatos>1?{enabled:!0,callbacks:{label:function(tooltipItem,data){var value=data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];return value=numeroFormateado(value),data.datasets[tooltipItem.datasetIndex].label+": "+value+"%"}},mode:"index",intersect:!1}:"pie"==tipoGrafico?{enabled:!0,callbacks:{label:function(tooltipItem,data){var value=data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];return value=numeroFormateado(value),data.labels[tooltipItem.index]+": "+value+"%"}}}:"Stacked Bar"==opt.tipoGrafico&&1==mostrarTotal?{enabled:!0,mode:"index",callbacks:{label:function(tooltipItem,data){var value=data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];return value=numeroFormateado(value),data.datasets[tooltipItem.datasetIndex].label+": "+value+"%"},footer:(tooltipItems,data)=>{let total=tooltipItems.reduce((a,e)=>a+parseFloat(e.yLabel),0);return"Total: "+new Intl.NumberFormat("es-AR",{maximumFractionDigits:2}).format(total)+"%"}}}:{enabled:!0,mode:"index",callbacks:{label:function(tooltipItem,data){var value=data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];return value=numeroFormateado(value),data.datasets[tooltipItem.datasetIndex].label+": "+value+"%"}}}:"line"==tipoGrafico&&cantDatos>1?{enabled:!0,callbacks:{label:function(tooltipItem,data){var value=data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];return value=numeroFormateado(value),data.datasets[tooltipItem.datasetIndex].label+": "+value}},mode:"index",intersect:!1}:"pie"==tipoGrafico?{enabled:!0,callbacks:{label:function(tooltipItem,data){var value=data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];return value=numeroFormateado(value),data.labels[tooltipItem.index]+": "+value}}}:"Stacked Bar"==opt.tipoGrafico&&cantDatos>1?1==mostrarTotal?{enabled:!0,mode:"index",intersect:!1,callbacks:{label:function(tooltipItem,data){var value=data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];return value=numeroFormateado(value),data.datasets[tooltipItem.datasetIndex].label+": "+value},footer:(tooltipItems,data)=>{let total=tooltipItems.reduce((a,e)=>a+parseFloat(e.yLabel),0);return"Total: "+new Intl.NumberFormat("es-AR",{maximumFractionDigits:2}).format(total)}}}:{enabled:!0,mode:"index",intersect:!1,callbacks:{label:function(tooltipItem,data){var value=data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];return value=numeroFormateado(value),data.datasets[tooltipItem.datasetIndex].label+": "+value}}}:{enabled:!0,mode:"index",callbacks:{label:function(tooltipItem,data){var value=data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];return value=numeroFormateado(value),data.datasets[tooltipItem.datasetIndex].label+": "+value}}},"pie"==tipoGrafico&&(colores.forEach(function(valor,indice,array){codigosColores.push(getColor(valor))}),console.log("etiquetas --\x3e "+etiquetas),console.log("datos --\x3e "+datos),console.log("colores --\x3e "+codigosColores),function(etiquetas,datos,tipoGrafico,colores,idGrafico,posicionLeyendas,toltips,mostrarLeyendas){const $grafica=document.getElementById(idGrafico);new Chart($grafica,{type:tipoGrafico,data:{labels:etiquetas,datasets:[{data:datos,borderColor:colores,backgroundColor:colores,borderWidth:2}]},options:{legend:{display:mostrarLeyendas,position:posicionLeyendas},responsive:!0,tooltips:toltips}})}(etiquetas,datos,tipoGrafico,codigosColores,opt.idComponenteGrafico,posicionLeyendas,toltips,mostrarLeyendas)),1==cantDatos&&(console.log("etiquetas --\x3e "+etiquetas),console.log("datos --\x3e "+datos),color=getColor(colores[0]),console.log("color --\x3e "+color),"Line"==opt.tipoGrafico&&function(etiquetas,datos,tipoGrafico,color,label,empiezaYenCero,idGrafico,posicionLeyendas,toltips,mostrarLeyendas){const $grafica=document.getElementById(idGrafico);new Chart($grafica,{type:tipoGrafico,data:{labels:etiquetas,datasets:[{data:datos,borderColor:color,backgroundColor:color,borderWidth:2,lineTension:0,fill:!1,label}]},options:{legend:{display:mostrarLeyendas,position:posicionLeyendas},tooltips:toltips,responsive:!0,scales:{yAxes:[{ticks:{beginAtZero:empiezaYenCero}}]}}})}(etiquetas,datos,tipoGrafico,color,columnas[0],opt.ejeYenCero,opt.idComponenteGrafico,posicionLeyendas,toltips,mostrarLeyendas),"bar"!=tipoGrafico&&"Area"!=opt.tipoGrafico||function(etiquetas,datos,tipoGrafico,color,label,empiezaYenCero,idGrafico,posicionLeyendas,toltips,mostrarLeyendas){const $grafica=document.getElementById(idGrafico);new Chart($grafica,{type:tipoGrafico,data:{labels:etiquetas,datasets:[{data:datos,borderColor:color,backgroundColor:color,borderWidth:2,lineTension:0,label}]},options:{legend:{display:mostrarLeyendas,position:posicionLeyendas},tooltips:toltips,responsive:!0,scales:{yAxes:[{ticks:{beginAtZero:empiezaYenCero}}]}}})}(etiquetas,datos,tipoGrafico,color,columnas[0],opt.ejeYenCero,opt.idComponenteGrafico,posicionLeyendas,toltips,mostrarLeyendas),"horizontalBar"==tipoGrafico&&function(etiquetas,datos,tipoGrafico,color,label,empiezaYenCero,idGrafico,posicionLeyendas,toltips,mostrarLeyendas){const $grafica=document.getElementById(idGrafico);new Chart($grafica,{type:tipoGrafico,data:{labels:etiquetas,datasets:[{data:datos,borderColor:color,backgroundColor:color,borderWidth:2,lineTension:0,label}]},options:{legend:{display:mostrarLeyendas,position:posicionLeyendas},tooltips:toltips,responsive:!0,scales:{xAxes:[{ticks:{beginAtZero:empiezaYenCero}}]}}})}(etiquetas,datos,tipoGrafico,color,columnas[0],opt.ejeYenCero,opt.idComponenteGrafico,posicionLeyendas,toltips,mostrarLeyendas)),cantDatos>1)if("heatmap"==tipoGrafico)if(void 0!==opt.heatMapColors&&""!=opt.heatMapColors&&void 0!==opt.heatMapColorsRange&&""!=opt.heatMapColorsRange){var datosFull=[],labelX="labelFila",labelY="labelColumna",labelValor="labelValor";void 0!==opt.datosTooltip&&opt.datosTooltip.length>0&&(void 0!==opt.datosTooltip[0]&&void 0!==opt.datosTooltip[0].labelFila&&(labelX=opt.datosTooltip[0].labelFila),void 0!==opt.datosTooltip[1]&&void 0!==opt.datosTooltip[1].labelColumna&&(labelY=opt.datosTooltip[1].labelColumna),void 0!==opt.datosTooltip[2]&&void 0!==opt.datosTooltip[2].labelValor&&(labelValor=opt.datosTooltip[2].labelValor)),jQuery.each(Object.keys(filteredTitleName),function(index,key){var pos=filteredTitleName[index];valores.hasOwnProperty(pos)&&(datos=valores[pos],datosFull.push(datos))});for(var series=[],i=0;i<columnas.length;i++){data=[];for(var l=0;l<etiquetas.length;l++){datos={x:etiquetas[l],y:parseInt(datosFull[l][i])};data.push(datos)}var serie={name:"*"!=labelsYCortos[i]?labelsYCortos[i]:columnas[i],data};series.push(serie)}var rango=[];for(i=0;i<opt.heatMapColorsRange.length-1;i++){data={from:opt.heatMapColorsRange[i],to:opt.heatMapColorsRange[i+1],color:getColor(opt.heatMapColors[i])};rango.push(data)}var mostrarYaxis="";mostrarYaxis=void 0===opt.mostrarEjeY||opt.mostrarEjeY,function(etiquetas,datos,idGrafico,labelsY,rango,labelX,labelY,labelValor,titulo,mostrarYaxis,posicionLeyendas,mostrarLeyendas){const $grafica=document.getElementById(idGrafico);new ApexCharts($grafica,{series:datos,chart:{height:650,type:"heatmap"},dataLabels:{enabled:!1},title:{text:titulo},tooltip:{custom:function({series,seriesIndex,dataPointIndex,w}){var value=series[seriesIndex][dataPointIndex];return value=numeroFormateado(value),'<div class="arrow_box"><span>'+labelX+": "+labelsY[seriesIndex]+"<br>"+labelY+": "+w.globals.labels[dataPointIndex]+"<br>"+labelValor+": "+value+"</span></div>"}},plotOptions:{heatmap:{shadeIntensity:.5,radius:0,useFillColorAsStroke:!1,colorScale:{ranges:rango}}},yaxis:{show:mostrarYaxis},legend:{show:mostrarLeyendas,position:posicionLeyendas},responsive:[{breakpoint:1e3,options:{yaxis:{show:!1},legend:{show:mostrarLeyendas,position:"top"}}}]}).render();const collection=document.getElementsByClassName("apexcharts-toolbar");for(let i=0;i<collection.length;i++)collection[i].style.display="none"}(0,series,opt.idComponenteGrafico,columnas,rango,labelX,labelY,labelValor,opt.tituloGrafico,mostrarYaxis,posicionLeyendas,mostrarLeyendas)}else void 0!==opt.heatMapColors&&""!=opt.heatMapColors||console.log("Completar vector con valores para los colores"),void 0!==opt.heatMapColorsRange&&""!=opt.heatMapColorsRange||console.log("Completar vector con el rango de valores para los colores");else{var datasets=[],indiceColor=0;colores.forEach(function(valor,indice,array){codigosColores.push(getColor(valor))}),console.log("colores --\x3e "+codigosColores);var indiceMixed=0;jQuery.each(Object.keys(filteredTitleName),function(index,key){var pos=filteredTitleName[index];if(valores.hasOwnProperty(pos)){if(datos=valores[pos],console.log("datos --\x3e "+datos),"Line"==opt.tipoGrafico)var dataset={label:columnas[indiceColor],data:datos,borderColor:codigosColores[indiceColor],fill:!1,borderWidth:2,lineTension:0,backgroundColor:codigosColores[indiceColor]};else if("Bar"==opt.tipoGrafico||"Area"==opt.tipoGrafico||"Horizontal Bar"==opt.tipoGrafico||"Stacked Bar"==opt.tipoGrafico)dataset={label:columnas[indiceColor],data:datos,borderColor:codigosColores[indiceColor],backgroundColor:codigosColores[indiceColor],borderWidth:2,lineTension:0};else if("Mixed"==opt.tipoGrafico){var tipo=tipoGraficosMixed[indiceMixed];if("barra"==tipo)dataset={label:columnas[indiceColor],data:datos,backgroundColor:codigosColores[indiceColor],yAxisID:"left-y-axis",type:"bar"};else if("linea"==tipo)dataset={label:columnas[indiceColor],data:datos,borderColor:codigosColores[indiceColor],backgroundColor:codigosColores[indiceColor],type:"line",yAxisID:"right-y-axis",fill:!1}}datasets.push(dataset),indiceColor+=1,indiceMixed+=1}}),"mixed"==tipoGrafico&&(2==porcentajesMixed.length?indicePorcentajeMixed=2:1==porcentajesMixed.length?"eje-y1"==porcentajesMixed[0]?indicePorcentajeMixed=0:"eje-y2"==porcentajesMixed[0]&&(indicePorcentajeMixed=1):indicePorcentajeMixed=3),console.log("etiquetas --\x3e "+etiquetas),console.log("toltip --\x3e"+JSON.stringify(toltips)),"Stacked Bar"==opt.tipoGrafico?function(etiquetas,tipoGrafico,datos,idGrafico,empiezaYenCero,posicionLeyendas,toltips,mostrarLeyendas){const $grafica=document.getElementById(idGrafico);new Chart($grafica,{type:tipoGrafico,data:{labels:etiquetas,datasets:datos},options:{legend:{display:mostrarLeyendas,position:posicionLeyendas,labels:{textAlign:"center"}},tooltips:toltips,responsive:!0,scales:{yAxes:[{ticks:{beginAtZero:empiezaYenCero},stacked:!0}],xAxes:[{stacked:!0}]}}})}(etiquetas,tipoGrafico,datasets,opt.idComponenteGrafico,opt.ejeYenCero,posicionLeyendas,toltips,mostrarLeyendas):"Mixed"==opt.tipoGrafico?function(etiquetas,tipoGrafico,datos,idGrafico,empiezaYenCero,posicionLeyendas,indice,label1,label2,mostrarLeyendas){const $grafica=document.getElementById(idGrafico);new Chart($grafica,{type:tipoGrafico,data:{labels:etiquetas,datasets:datos},options:{legend:{display:mostrarLeyendas,position:posicionLeyendas,labels:{textAlign:"center"}},tooltips:{enabled:!0,mode:"single",callbacks:{label:function(tooltipItems,data){var text="";2==indice?text="%":tooltipItems.datasetIndex==indice&&(text="%");var value=numeroFormateado(tooltipItems.yLabel);return data.datasets[tooltipItems.datasetIndex].label+": "+value+" "+text}}},responsive:!0,scales:{yAxes:[{id:"left-y-axis",type:"linear",position:"left",ticks:{beginAtZero:empiezaYenCero,callback:function(value){var text="";return 1!=indice&&2!=indice||(text="%"),value+text}},scaleLabel:{display:!0,labelString:label2,fontColor:"black"}},{id:"right-y-axis",type:"linear",position:"right",ticks:{beginAtZero:empiezaYenCero,callback:function(value){var text="";return 0!=indice&&2!=indice||(text="%"),value+text}},scaleLabel:{display:!0,labelString:label1,fontColor:"black"}}]}}})}(etiquetas,"bar",datasets,opt.idComponenteGrafico,opt.ejeYenCero,posicionLeyendas,indicePorcentajeMixed,columnas[0],columnas[1],mostrarLeyendas):"Horizontal Bar"==opt.tipoGrafico?function(etiquetas,tipoGrafico,datos,idGrafico,empiezaYenCero,posicionLeyendas,toltips,mostrarLeyendas){const $grafica=document.getElementById(idGrafico);new Chart($grafica,{type:tipoGrafico,data:{labels:etiquetas,datasets:datos},options:{legend:{display:mostrarLeyendas,position:posicionLeyendas,labels:{textAlign:"center"}},tooltips:toltips,responsive:!0,maintainAspectRatio:!0,scales:{xAxes:[{ticks:{beginAtZero:empiezaYenCero}}]}}})}(etiquetas,tipoGrafico,datasets,opt.idComponenteGrafico,opt.ejeYenCero,posicionLeyendas,toltips,mostrarLeyendas):function(etiquetas,tipoGrafico,datos,idGrafico,empiezaYenCero,posicionLeyendas,toltips,mostrarLeyendas){const $grafica=document.getElementById(idGrafico);new Chart($grafica,{type:tipoGrafico,data:{labels:etiquetas,datasets:datos},options:{legend:{display:mostrarLeyendas,position:posicionLeyendas,labels:{textAlign:"center"}},tooltips:toltips,responsive:!0,maintainAspectRatio:!0,scales:{yAxes:[{ticks:{beginAtZero:empiezaYenCero}}]}}})}(etiquetas,tipoGrafico,datasets,opt.idComponenteGrafico,opt.ejeYenCero,posicionLeyendas,toltips,mostrarLeyendas)}""!=opt.tituloGrafico&&void 0!==opt.tituloGrafico&&(idTag=opt.idTagTituloGrafico,titulo=opt.tituloGrafico,document.getElementById(idTag)&&(document.getElementById(idTag).innerHTML=titulo))}}function gapi_legacy(response){const keys=response.values[0],regex=/ |\/|_/gi;let entry=[];return response.values.forEach((v,k)=>{if(k>0){let zip={};for(var i in keys){var d=v.hasOwnProperty(i)?v[i].trim():"";zip[`gsx$${keys[i].toLowerCase().replace(regex,"")}`]={$t:d}}entry.push(zip)}}),{feed:{entry}}}