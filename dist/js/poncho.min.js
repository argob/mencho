function ponchoTable(r){var n,t,c=[],d=[],s=[],p=[],o="",h=[],u="";function a(e){jQuery.getJSON(e,function(e){function t(e){return e.replace(/έ/g,"ε").replace(/[ύϋΰ]/g,"υ").replace(/ό/g,"ο").replace(/ώ/g,"ω").replace(/ά/g,"α").replace(/[ίϊΐ]/g,"ι").replace(/ή/g,"η").replace(/\n/g," ").replace(/[áÁ]/g,"a").replace(/[éÉ]/g,"e").replace(/[íÍ]/g,"i").replace(/[óÓ]/g,"o").replace(/[úÚ]/g,"u").replace(/ê/g,"e").replace(/î/g,"i").replace(/ô/g,"o").replace(/è/g,"e").replace(/ï/g,"i").replace(/ü/g,"u").replace(/ã/g,"a").replace(/õ/g,"o").replace(/ç/g,"c").replace(/ì/g,"i")}c=e.values,jQuery.each(Object.keys(c[0]),function(e,t){c[0][t]&&(d.push(c[0][t]),s.push(t),o+="<th>"+c[1][t]+"</th>",h.push(c[1][t]))}),jQuery("#ponchoTable caption").html(r.tituloTabla),jQuery("#ponchoTable thead tr").empty(),jQuery("#ponchoTable thead tr").append(o),jQuery.each(c,function(o,e){var i,l;1<o&&(l=i="",jQuery.each(d,function(e,t){var a,r="",s=c[o][e];d[e].includes("btn-")&&s&&(s='<a aria-label="'+(a=c[0][e].replace("btn-","").replace("-"," "))+'" class="btn btn-primary btn-sm margin-btn" target="_blank" href="'+s+'">'+a+"</a>"),d[e].includes("filtro-")&&s&&(n=e,a=c[1][e],jQuery("#tituloFiltro").html(a),p.push(s)),d[e].includes("fecha-")&&s&&(a=s.split("/"),s='<span style="display:none;">'+new Date(a[2],a[1]-1,a[0]).toISOString().split("T")[0]+"</span>"+s),s||(s="",r="hidden-xs"),i+=s,s=(new showdown.Converter).makeHtml(s),l+='<td class="'+r+'" data-title="'+h[e]+'">'+s+"</td>"}),""!=i&&(u=(u+="<tr>")+l+"</tr>"))}),jQuery.each(p.filter(function(e,t,a){return t===a.indexOf(e)}),function(e,t){jQuery("#ponchoTableFiltro").append("<option>"+t+"</option>")}),jQuery("#ponchoTable tbody").empty(),jQuery("#ponchoTableSearchCont").show(),jQuery("#ponchoTable tbody").append(u),jQuery("#ponchoTable").removeClass("state-loading");var e=jQuery.fn.DataTable.ext.type.search,a=(e.string=function(e){return e?"string"==typeof e?t(e):e:""},e.html=function(e){return e?"string"==typeof e?t(e.replace(/<.*?>/g,"")):e:""},jQuery.isFunction(jQuery.fn.DataTable.ext.order.intl)&&(jQuery.fn.DataTable.ext.order.intl("es"),jQuery.fn.DataTable.ext.order.htmlIntl("es")),jQuery("#ponchoTable").DataTable({lengthChange:!1,autoWidth:!1,pageLength:r.cantidadItems,columnDefs:[{type:"html-num",targets:r.tipoNumero},{targets:r.ocultarColumnas,visible:!1}],ordering:r.orden,order:[[r.ordenColumna-1,r.ordenTipo]],dom:"<'row'<'col-sm-6'l><'col-sm-6'f>><'row'<'col-sm-12'i>><'row'<'col-sm-12'tr>><'row'<'col-md-offset-3 col-md-6 col-sm-offset-2 col-sm-8'p>>",language:{sProcessing:"Procesando...",sLengthMenu:"Mostrar _MENU_ registros",sZeroRecords:"No se encontraron resultados",sEmptyTable:"Ningún dato disponible en esta tabla",sInfo:"_TOTAL_ resultados",sInfoEmpty:"No hay resultados",sInfoFiltered:"",sInfoPostFix:"",sSearch:"Buscar:",sUrl:"",sInfoThousands:".",sLoadingRecords:"Cargando...",oPaginate:{sFirst:"<<",sLast:">>",sNext:">",sPrevious:"<"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente",paginate:{first:"Ir a la primera página",previous:"Ir a la página anterior",next:"Ir a la página siguiente",last:"Ir a la última página"}}}}));jQuery(document).ready(function(){jQuery("#ponchoTableSearch").keyup(function(){a.search(jQuery.fn.DataTable.ext.type.search.string(this.value)).draw()})}),jQuery("#ponchoTable_filter").parent().parent().remove(),1<jQuery("#ponchoTableFiltro option").length&&jQuery("#ponchoTableFiltroCont").show(),jQuery("#ponchoTableFiltro").on("change",function(){var e=jQuery.fn.DataTable.ext.type.search.string(jQuery(this).val());""!=e?a.column(n).every(function(){this.search(e?"^"+e+"$":"",!0,!1).draw()}):a.search("").columns().search("").draw()})})}jQuery.fn.DataTable.isDataTable("#ponchoTable")&&jQuery("#ponchoTable").DataTable().destroy(),r.jsonUrl?a(r.jsonUrl):(t=r.hojaNumero,jQuery.getJSON("https://sheets.googleapis.com/v4/spreadsheets/"+r.idSpread+"/?alt=json&key=AIzaSyCq2wEEKL9-6RmX-TkW23qJsrmnFHFf5tY",function(e){e=e.sheets[t-1].properties.title;a("https://sheets.googleapis.com/v4/spreadsheets/"+r.idSpread+"/values/"+e+"?alt=json&key=AIzaSyCq2wEEKL9-6RmX-TkW23qJsrmnFHFf5tY")}))}jQuery("#ponchoTable").addClass("state-loading");var content_popover=document.getElementById("content-popover");function popshow(){content_popover.classList.toggle("hidden")}function pophidde(){content_popover.classList.add("hidden")}var ponchoUbicacion=function(e){var a,r,s,o,t="/profiles/argentinagobar/themes/contrib/poncho/resources/jsons/geoprovincias.json",i="/profiles/argentinagobar/themes/contrib/poncho/resources/jsons/geolocalidades.json",l=jQuery('input[name="submitted['+e.provincia+']"]'),n=jQuery('input[name="submitted['+e.localidad+']"]');function c(e){return e.charAt(0).toUpperCase()+e.slice(1)}function d(e,t,a,r=!1,s=!1,o=!1){var i=jQuery("<select></select>").attr("id",t).attr("name",e).addClass("form-control form-select").prop("required",r);return s&&i.append("<option value=''>Seleccione una opción</option>"),jQuery.each(a,function(e,t){let a="";o==t.nombre&&(a='selected="selected"'),i.append("<option value='"+t.id+"' "+a+">"+t.nombre+"</option>")}),i}function p(e,t){var a=n.prop("required");return l.val()?d("sLocalidades","sLocalidades",e.filter(function(e){return String(e.provincia.id)==String(t)}).map(function(e){return e.departamento.nombre&&(e.nombre=c(e.departamento.nombre.toLowerCase())+" - "+c(e.nombre.toLowerCase())),e}).sort(function(e,t){e=e.nombre.toUpperCase(),t=t.nombre.toUpperCase();return e.localeCompare(t)}),a,emptyOption=!!n.val(),n.val()):d("sLocalidades","sLocalidades",[],a,!0,!1)}t=e.urlProvincias||t,i=e.urlLocalidades||i,jQuery.getJSON(t,function(e){var t;a=[],e.results.forEach(function(e,t){a.push(e)}),e=[],e=(t=a).sort(function(e,t){e=e.nombre.toUpperCase(),t=t.nombre.toUpperCase();return e.localeCompare(t)}),t=l.prop("required"),(s=d("sProvincias","sProvincias",e,t,!0,l.val())).on("change",function(e){var t;l.val(""),n.val(""),o.children("option:not(:first)").remove(),""!=s.val()&&(l.val(s.find(":selected").text()),t=p(r,s.val()).find("option"),o.append(t),o.val(""))}),l.after(s),jQuery(s).select2()}),jQuery.getJSON(i,function(e){r=[],e.results.forEach(function(e,t){r.push(e)}),(o=p(r,s.val())).on("change",function(e){n.val(""),""!=o.val()&&n.val(o.find(":selected").text())}),n.after(o),jQuery(o).select2()}),l.hide(),n.hide()};function ponchoChart(t){"use strict";var e;function be(e){return"HeatMap"==e?"heatmap":"Mixed"==e?"mixed":"Stacked Bar"==e?"bar":"Horizontal Bar"==e?"horizontalBar":"Area"==e?"line":"Pie"==e?"pie":"Bar"==e?"bar":"Line"==e?"line":""}function ye(e){var t="";switch(e){case"celeste":case"info":t="#2897d4";break;case"verde":case"success":t="#2e7d33";break;case"rojo":case"danger":t="#c62828";break;case"amarillo":case"warning":t="#f9a822";break;case"azul":case"primary":t="#0072bb";break;case"negro":case"black":t="#333";break;case"uva":t="#6a1b99";break;case"gris":case"muted":t="#525252";break;case"grisintermedio":case"gray":case"gris-area":t="#f2f2f2";break;case"celesteargentina":case"celeste-argentina":t="#37bbed";break;case"fucsia":t="#ec407a";break;case"arandano":t="#c2185b";break;case"cielo":t="#039be5";break;case"verdin":t="#6ea100";break;case"lima":t="#cddc39";break;case"maiz":case"maíz":t="#ffce00";break;case"tomate":t="#ef5350";break;case"naranjaoscuro":case"naranja":t="#EF6C00";break;case"verdeazulado":case"verde-azulado":t="#008388";break;case"escarapela":t="#2cb9ee";break;case"lavanda":t="#9284be";break;case"mandarina":t="#f79525";break;case"palta":t="#50b7b2";break;case"cereza":t="#ed3d8f";break;case"limon":t="#d7df23";break;case"verdejade":case"verde-jade":t="#066";break;case"verdealoe":case"verde-aloe":t="#4fbb73";break;case"verdecemento":case"verde-cemento":t="#b4beba";break;default:console.log("No existe color "+e)}return t}function ve(e){var e=e.toString().replace(".",","),t=e.split(","),a=new Intl.NumberFormat("es-AR",{maximumFractionDigits:2}).format(t[0]);return e=1<t.length?a.concat(",",t[1].substr(0,2)):a}function a(e,r){var F,H,t,z,a,s,q,P,N,o,i,B,D,l,n,R,U,$,c,d,Y,p,Z,h,V,u,m=[],f=[],g=[],W=[],b=[],y=[],v=[],_=[],k=0,C="",J=[],j=0,x=[],K=[],X=0,w=r.posicionLeyendas||"top",L="",L=void 0===r.mostrarLeyendas||r.mostrarLeyendas,T="",T=void 0===r.mostrarTotalStacked||r.mostrarTotalStacked,S=be(r.tipoGrafico),E=e.values;if(jQuery.each(Object.keys(E[0]),function(e,t){var a;"eje-y"==E[0][e].substr(0,5)?(a=(a=E[0][e].split("-"))[0]+a[1],f.push(a),g.push(e)):"nombre-corto"==E[0][e]&&"heatmap"==S&&(X=e)}),jQuery.each(E,function(s,e){var r;0==s&&jQuery.each(g,function(e,t){var a=E[s][g[e]].split("-"),r=a[0]+a[1];v[r]=[],W.push(a[2]),"mixed"==S&&(3<a.length&&("barra"==a[3]||"linea"==a[3])?J.push(a[3]):(0==e&&J.push("barra"),1==e&&J.push("linea")))}),1==s&&jQuery.each(g,function(e,t){"pie"==S||"heatmap"==S?m.push(E[s][g[e]]):(y.push(E[s][g[e]]),k+=1)}),1<s&&(r=!1,jQuery.each(g,function(e,t){var a=E[0][g[e]].split("-"),a=a[0]+a[1];"pie"==S?v[a].push(E[s][g[e]]):"heatmap"==S?(0==r&&(y.push(E[s][0]),r=!0,k+=1),e!=X&&v[a].push(E[s][g[e]]),e+2==X&&(void 0===E[s][e+2]?K.push("*"):K.push(E[s][e+2]))):(0==r&&(m.push(E[s][0]),r=!0),v[a].push(E[s][g[e]]))}))}),"pie"==S?(F=[],jQuery.each(Object.keys(f),function(e,t){e=f[e];v.hasOwnProperty(e)&&F.push(v[e])}),_=F):1==k&&jQuery.each(Object.keys(f),function(e,t){e=f[e];v.hasOwnProperty(e)&&(_=v[e])}),"mixed"!=S||0<(H=r.porcentajesMixed||"").length&&(x=H.split(",")),C=1==r.porcentajes?"line"==S&&1<k?{enabled:!0,callbacks:{label:function(e,t){var a=ve(t.datasets[e.datasetIndex].data[e.index]);return t.datasets[e.datasetIndex].label+": "+a+"%"}},mode:"index",intersect:!1}:"pie"==S?{enabled:!0,callbacks:{label:function(e,t){var a=ve(t.datasets[e.datasetIndex].data[e.index]);return t.labels[e.index]+": "+a+"%"}}}:"Stacked Bar"==r.tipoGrafico?1==T?{enabled:!0,mode:"index",callbacks:{label:function(e,t){var a=ve(t.datasets[e.datasetIndex].data[e.index]);return t.datasets[e.datasetIndex].label+": "+a+"%"},footer:(e,t)=>{e=e.reduce((e,t)=>e+parseFloat(t.yLabel),0);return"Total: "+new Intl.NumberFormat("es-AR",{maximumFractionDigits:2}).format(e)+"%"}}}:{enabled:!0,mode:"index",callbacks:{label:function(e,t){var a=ve(t.datasets[e.datasetIndex].data[e.index]);return t.datasets[e.datasetIndex].label+": "+a+"%"}}}:{enabled:!0,mode:"index",callbacks:{label:function(e,t){var a=ve(t.datasets[e.datasetIndex].data[e.index]);return t.datasets[e.datasetIndex].label+": "+a+"%"}}}:"line"==S&&1<k?{enabled:!0,callbacks:{label:function(e,t){var a=ve(t.datasets[e.datasetIndex].data[e.index]);return t.datasets[e.datasetIndex].label+": "+a}},mode:"index",intersect:!1}:"pie"==S?{enabled:!0,callbacks:{label:function(e,t){var a=ve(t.datasets[e.datasetIndex].data[e.index]);return t.labels[e.index]+": "+a}}}:"Stacked Bar"==r.tipoGrafico&&1<k?1==T?{enabled:!0,mode:"index",intersect:!1,callbacks:{label:function(e,t){var a=ve(t.datasets[e.datasetIndex].data[e.index]);return t.datasets[e.datasetIndex].label+": "+a},footer:(e,t)=>{e=e.reduce((e,t)=>e+parseFloat(t.yLabel),0);return"Total: "+new Intl.NumberFormat("es-AR",{maximumFractionDigits:2}).format(e)}}}:{enabled:!0,mode:"index",intersect:!1,callbacks:{label:function(e,t){var a=ve(t.datasets[e.datasetIndex].data[e.index]);return t.datasets[e.datasetIndex].label+": "+a}}}:{enabled:!0,mode:"index",callbacks:{label:function(e,t){var a=ve(t.datasets[e.datasetIndex].data[e.index]);return t.datasets[e.datasetIndex].label+": "+a}}},"pie"==S&&(W.forEach(function(e,t,a){b.push(ye(e))}),console.log("etiquetas --\x3e "+m),console.log("datos --\x3e "+_),console.log("colores --\x3e "+b),H=m,T=_,N=S,o=b,t=r.idComponenteGrafico,B=w,D=C,i=L,t=document.getElementById(t),new Chart(t,{type:N,data:{labels:H,datasets:[{data:T,borderColor:o,backgroundColor:o,borderWidth:2}]},options:{legend:{display:i,position:B},responsive:!0,tooltips:D}})),1==k&&(console.log("etiquetas --\x3e "+m),console.log("datos --\x3e "+_),t=ye(W[0]),console.log("color --\x3e "+t),"Line"==r.tipoGrafico&&(N=m,T=_,o=S,i=t,B=y[0],D=r.ejeYenCero,l=r.idComponenteGrafico,n=w,R=C,U=L,l=document.getElementById(l),new Chart(l,{type:o,data:{labels:N,datasets:[{data:T,borderColor:i,backgroundColor:i,borderWidth:2,lineTension:0,fill:!1,label:B}]},options:{legend:{display:U,position:n},tooltips:R,responsive:!0,scales:{yAxes:[{ticks:{beginAtZero:D}}]}}})),"bar"!=S&&"Area"!=r.tipoGrafico||(l=m,T=_,U=S,n=t,R=y[0],z=r.ejeYenCero,a=r.idComponenteGrafico,s=w,q=C,P=L,a=document.getElementById(a),new Chart(a,{type:U,data:{labels:l,datasets:[{data:T,borderColor:n,backgroundColor:n,borderWidth:2,lineTension:0,label:R}]},options:{legend:{display:P,position:s},tooltips:q,responsive:!0,scales:{yAxes:[{ticks:{beginAtZero:z}}]}}})),"horizontalBar"==S&&(a=m,T=_,P=S,s=t,q=y[0],z=r.ejeYenCero,A=r.idComponenteGrafico,ie=w,le=C,te=L,A=document.getElementById(A),new Chart(A,{type:P,data:{labels:a,datasets:[{data:T,borderColor:s,backgroundColor:s,borderWidth:2,lineTension:0,label:q}]},options:{legend:{display:te,position:ie},tooltips:le,responsive:!0,scales:{xAxes:[{ticks:{beginAtZero:z}}]}}}))),1<k)if("heatmap"==S)if(void 0!==r.heatMapColors&&""!=r.heatMapColors&&void 0!==r.heatMapColorsRange&&""!=r.heatMapColorsRange){for(var ee=[],A="labelFila",T="labelColumna",te="labelValor",ae=(void 0!==r.datosTooltip&&0<r.datosTooltip.length&&(void 0!==r.datosTooltip[0]&&void 0!==r.datosTooltip[0].labelFila&&(A=r.datosTooltip[0].labelFila),void 0!==r.datosTooltip[1]&&void 0!==r.datosTooltip[1].labelColumna&&(T=r.datosTooltip[1].labelColumna),void 0!==r.datosTooltip[2]&&void 0!==r.datosTooltip[2].labelValor&&(te=r.datosTooltip[2].labelValor)),jQuery.each(Object.keys(f),function(e,t){e=f[e];v.hasOwnProperty(e)&&(_=v[e],ee.push(_))}),[]),I=0;I<y.length;I++){for(var e=[],re=0;re<m.length;re++){_={x:m[re],y:parseInt(ee[re][I])};e.push(_)}var se={name:("*"!=K[I]?K:y)[I],data:e};ae.push(se)}for(var oe=[],I=0;I<r.heatMapColorsRange.length-1;I++){e={from:r.heatMapColorsRange[I],to:r.heatMapColorsRange[I+1],color:ye(r.heatMapColors[I])};oe.push(e)}var ie="",ie=void 0===r.mostrarEjeY||r.mostrarEjeY;{var le=ae;var Q=r.idComponenteGrafico;var ne=y;var ce=oe;var de=A;var pe=T;var he=te;var T=r.tituloGrafico;var M=ie;var ue=w;var me=L;Q=document.getElementById(Q),new ApexCharts(Q,{series:le,chart:{height:650,type:"heatmap"},dataLabels:{enabled:!1},title:{text:T},tooltip:{custom:function({series:e,seriesIndex:t,dataPointIndex:a,w:r}){e=ve(e[t][a]);return'<div class="arrow_box"><span>'+de+": "+ne[t]+"<br>"+pe+": "+r.globals.labels[a]+"<br>"+he+": "+e+"</span></div>"}},plotOptions:{heatmap:{shadeIntensity:.5,radius:0,useFillColorAsStroke:!1,colorScale:{ranges:ce}}},yaxis:{show:M},legend:{show:me,position:ue},responsive:[{breakpoint:1e3,options:{yaxis:{show:!1},legend:{show:me,position:"top"}}}]}).render();const ge=document.getElementsByClassName("apexcharts-toolbar");for(let e=0;e<ge.length;e++)ge[e].style.display="none"}}else void 0!==r.heatMapColors&&""!=r.heatMapColors||console.log("Completar vector con valores para los colores"),void 0!==r.heatMapColorsRange&&""!=r.heatMapColorsRange||console.log("Completar vector con el rango de valores para los colores");else{var O=[],G=0,fe=(W.forEach(function(e,t,a){b.push(ye(e))}),console.log("colores --\x3e "+b),0);jQuery.each(Object.keys(f),function(e,t){var a,e=f[e];v.hasOwnProperty(e)&&(_=v[e],console.log("datos --\x3e "+_),"Line"==r.tipoGrafico?a={label:y[G],data:_,borderColor:b[G],fill:!1,borderWidth:2,lineTension:0,backgroundColor:b[G]}:"Bar"==r.tipoGrafico||"Area"==r.tipoGrafico||"Horizontal Bar"==r.tipoGrafico||"Stacked Bar"==r.tipoGrafico?a={label:y[G],data:_,borderColor:b[G],backgroundColor:b[G],borderWidth:2,lineTension:0}:"Mixed"==r.tipoGrafico&&("barra"==(e=J[fe])?a={label:y[G],data:_,backgroundColor:b[G],yAxisID:"left-y-axis",type:"bar"}:"linea"==e&&(a={label:y[G],data:_,borderColor:b[G],backgroundColor:b[G],type:"line",yAxisID:"right-y-axis",fill:!1})),O.push(a),G+=1,fe+=1)}),"mixed"==S&&(2==x.length?j=2:1==x.length?"eje-y1"==x[0]?j=0:"eje-y2"==x[0]&&(j=1):j=3),console.log("etiquetas --\x3e "+m),console.log("toltip --\x3e"+JSON.stringify(C)),"Stacked Bar"==r.tipoGrafico?(Q=m,T=S,ce=O,M=r.idComponenteGrafico,ue=r.ejeYenCero,me=w,x=C,V=L,M=document.getElementById(M),new Chart(M,{type:T,data:{labels:Q,datasets:ce},options:{legend:{display:V,position:me,labels:{textAlign:"center"}},tooltips:x,responsive:!0,scales:{yAxes:[{ticks:{beginAtZero:ue},stacked:!0}],xAxes:[{stacked:!0}]}}})):"Mixed"==r.tipoGrafico?(T=m,V="bar",x=O,c=r.idComponenteGrafico,d=r.ejeYenCero,Y=w,p=j,j=y[0],Z=y[1],h=L,c=document.getElementById(c),new Chart(c,{type:V,data:{labels:T,datasets:x},options:{legend:{display:h,position:Y,labels:{textAlign:"center"}},tooltips:{enabled:!0,mode:"single",callbacks:{label:function(e,t){var a="",r=((2==p||e.datasetIndex==p)&&(a="%"),ve(e.yLabel));return t.datasets[e.datasetIndex].label+": "+r+" "+a}}},responsive:!0,scales:{yAxes:[{id:"left-y-axis",type:"linear",position:"left",ticks:{beginAtZero:d,callback:function(e){return e+(1!=p&&2!=p?"":"%")}},scaleLabel:{display:!0,labelString:Z,fontColor:"black"}},{id:"right-y-axis",type:"linear",position:"right",ticks:{beginAtZero:d,callback:function(e){return e+(0!=p&&2!=p?"":"%")}},scaleLabel:{display:!0,labelString:j,fontColor:"black"}}]}}})):"Horizontal Bar"==r.tipoGrafico?(c=m,T=S,x=O,h=r.idComponenteGrafico,Y=r.ejeYenCero,Z=w,d=C,j=L,h=document.getElementById(h),new Chart(h,{type:T,data:{labels:c,datasets:x},options:{legend:{display:j,position:Z,labels:{textAlign:"center"}},tooltips:d,responsive:!0,maintainAspectRatio:!0,scales:{xAxes:[{ticks:{beginAtZero:Y}}]}}})):(T=m,x=S,j=O,u=r.idComponenteGrafico,$=r.ejeYenCero,w=w,C=C,L=L,u=document.getElementById(u),new Chart(u,{type:x,data:{labels:T,datasets:j},options:{legend:{display:L,position:w,labels:{textAlign:"center"}},tooltips:C,responsive:!0,maintainAspectRatio:!0,scales:{yAxes:[{ticks:{beginAtZero:$}}]}}}))}""!=r.tituloGrafico&&void 0!==r.tituloGrafico&&(u=r.idTagTituloGrafico,x=r.tituloGrafico,document.getElementById(u)&&(document.getElementById(u).innerHTML=x))}!function(e){var t=!1;(e.idSpread&&e.hojaNombre||e.jsonUrl||e.jsonInput)&&void 0!==e.tipoGrafico&&""!=e.tipoGrafico&&void 0!==e.idComponenteGrafico&&""!=e.idComponenteGrafico&&""!=be(e.tipoGrafico)&&(t=!0);return t}(t)?(void 0!==t.idSpread&&""!=t.idSpread||console.log("Completar valor para la opción de Configuración idSpread"),void 0!==t.hojaNombre&&""!=t.hojaNombre||console.log("Completar valor para la opción de Configuración hojaNombre"),void 0!==t.tipoGrafico&&""!=t.tipoGrafico||console.log("Completar valor para la opción de Configuración tipoGrafico"),void 0!==t.idComponenteGrafico&&""!=t.idComponenteGrafico||console.log("Completar valor para la opción de Configuración idComponenteGrafico"),""==be(t.tipoGrafico)&&console.log("Ingrese un tipo de gafico válido")):t.jsonInput?(console.log(t.jsonInput),a(jQuery.parseJSON(t.jsonInput),t)):(e=t.jsonUrl||"https://sheets.googleapis.com/v4/spreadsheets/"+t.idSpread+"/values/"+t.hojaNombre+"?alt=json&key=AIzaSyCq2wEEKL9-6RmX-TkW23qJsrmnFHFf5tY",jQuery.getJSON(e,function(e){a(e,t)}))}const gapi_legacy=e=>{const s=e.values[0],o=/ |\/|_/gi;let i=[];return e.values.forEach((t,e)=>{if(0<e){let e={};for(const r in s){var a=t.hasOwnProperty(r)?t[r].trim():"";e["gsx$"+s[r].toLowerCase().replace(o,"")]={$t:a}}i.push(e)}}),{feed:{entry:i}}};class PonchoMap{constructor(e,t){this.data=e;e=Object.assign({},{template:!1,template_structure:{},template_container_class_list:["info-container"],template_title_class_list:["h4","title","m-t-0"],template_dl_class_list:["definition-list"],template_innerhtml:!1,template_header:!1,scope:"",slider:!1,scroll:!1,hash:!1,headers:{},map_selector:"map",anchor_delay:0,slider_selector:".slider",slider_close_selector:".js-close-slider",map_view:[-40.44,-63.59],map_anchor_zoom:16,map_zoom:4,id:"id",reset_zoom:!1,latitud:"latitud",longitud:"longitud",marker:"azul",marker_cluster_options:{spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,zoomToBoundsOnClick:!0,maxClusterRadius:10,spiderfyDistanceMultiplier:1.5,spiderLegPolylineOptions:{weight:1,color:"#666",opacity:.5}}},t);this.scope=e.scope,this.template=e.template,this.template_structure=e.template_structure,this.template_title_class_list=e.template_title_class_list,this.template_dl_class_list=e.template_dl_class_list,this.template_container_class_list=e.template_container_class_list,this.template_innerhtml=e.template_innerhtml,this.template_header=e.template_header,this.map_selector=e.map_selector,this.headers=e.headers,this.hash=e.hash,this.scroll=e.scroll,this.map_view=e.map_view,this.anchor_delay=e.anchor_delay,this.map_zoom=e.map_zoom,this.map_anchor_zoom=e.map_anchor_zoom,this.marker_cluster_options=e.marker_cluster_options,this.marker_color=e.marker,this.id=e.id,this.latitud=e.latitud,this.longitud=e.longitud,this.slider=e.slider,this.reset_zoom=e.reset_zoom,this.slider_selector=this.selectorName(e.slider_selector),this.slider_close_selector=e.slider_close_selector,this.selected_marker,this.scope_selector=`[data-scope="${this.scope}"]`,this.map=new L.map(this.map_selector,{preferCanvas:!0}).setView(this.map_view,this.map_zoom),new L.tileLayer("https://gis.argentina.gob.ar/osm/{z}/{x}/{y}.png",{attribution:'&copy; Contribuidores <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(this.map),this.markers=new L.markerClusterGroup(this.marker_cluster_options)}get entries(){return this.data}addHash=e=>{window.location.hash="#"+e};entry=t=>this.entries.find(e=>e[this.id]==t);selectorName=e=>e.replace(/^(\.|\#)/,"");scrollCenter=()=>{const e=document.getElementById(this.map_selector);var t=e.getBoundingClientRect(),a=(e.offsetLeft+e.offsetWidth)/2,t=t.top+window.scrollY;window.scrollTo({top:t,left:a,behavior:"smooth"})};clearContent=()=>document.querySelector(this.scope_selector+" .js-content").innerHTML="";toggleSlider=()=>document.querySelector(this.scope_selector+" ."+this.slider_selector).classList.toggle(this.slider_selector+"--in");clickToggleSlider=()=>document.querySelectorAll(this.scope_selector+" "+this.slider_close_selector).forEach(e=>e.addEventListener("click",()=>{this.clearContent(),this.toggleSlider()}));isOpen=()=>document.querySelector(this.scope_selector+" ."+this.slider_selector).classList.contains(this.slider_selector+"--in");setContent=e=>{this.isOpen()||this.toggleSlider();e="function"==typeof this.template?this.template(this,e):this.defaultTemplate(this,e);document.querySelector(this.scope_selector+" .js-content").innerHTML=e};header=e=>this.headers.hasOwnProperty(e)?this.headers[e]:e;validateLatLng=t=>{t=t.toString().split(",");{let e=0;if(e<t.length)return!(isNaN(t[e])||t[e]<-127||75<t[e])}};renderSlider=()=>{document.querySelectorAll(this.scope_selector+" .slider").forEach(e=>e.remove());let e=document.createElement("button"),t=(e.classList.add("btn","btn-xs","btn-secondary","btn-close",this.selectorName(this.slider_close_selector)),e.setAttribute("title","Cerrar panel"),e.innerHTML='<span class="sr-only">Cerrar</span>✕',document.createElement("div")),a=(t.classList.add("content-container"),document.createElement("div")),r=(a.classList.add("content","js-content"),t.appendChild(a),document.createElement("div"));r.classList.add("slider"),r.appendChild(e),r.appendChild(t),document.querySelector(""+this.scope_selector).appendChild(r)};showSlider=(e,t)=>{this.map.setView([t[this.latitud],t[this.longitud]],this.map_anchor_zoom),e.fireEvent("click")};showPopup=e=>{this.markers.zoomToShowLayer(e,()=>{e.__parent.spiderfy(),e.openPopup()})};hasHash=()=>{return window.location.hash.replace("#","")||!1};gotoHashedEntry=()=>{var e=this.hasHash();e&&this.gotoEntry(e)};gotoEntry=t=>{const a=this.entry(t);this.markers.eachLayer(e=>{e.options.id==t&&(this.setSelectedMarker(t,e),this.hash&&this.addHash(t),this.slider&&this.hash?this.showSlider(e,a):this.showPopup(e))})};clickeableMarkers=()=>{this.markers.eachLayer(t=>{t.on("click",e=>{document.querySelectorAll(".marker--active").forEach(e=>e.classList.remove("marker--active"));try{e.sourceTarget._icon.classList.add("marker--active")}catch(e){}e=this.entries.find(e=>e[this.id]==t.options.id);this.setContent(e)})})};urlHash=()=>{this.markers.eachLayer(t=>{t.on("click",e=>{this.addHash(t.options.id)})})};removeListElement=(e,t)=>{t=e.indexOf(t);return-1<t&&e.splice(t,1),e};templateTitle=e=>{const t=this.template_structure;if(!t.hasOwnProperty("title"))return!1;let a;if(this.template_header){const s=document.createElement("div");s.innerHTML=this.template_header(this,e),a=s}else(a=document.createElement("h1")).classList.add(...this.template_title_class_list),a.textContent=e[t.title];const r=document.createElement("header");return r.className="header",r.appendChild(a),r};templateList=e=>{const t=this.template_structure;var a=Object.keys(e);let r=a;if(t.hasOwnProperty("values")&&0<t.values.length)r=t.values;else if(t.hasOwnProperty("exclude")&&0<t.exclude.length)for(const s of t.exclude)r=this.removeListElement(a,s);return r};defaultTemplate=(e,t)=>{var a=this.templateList(t),r=this.templateTitle(t);const s=document.createElement("article"),o=(s.classList.add(...this.template_container_class_list),document.createElement("dl"));o.classList.add(...this.template_dl_class_list),o.style.fontSize="1rem";for(const i of a)if(!t.hasOwnProperty(i)||t[i]){const l=document.createElement("dt"),n=(l.textContent=this.header(i),this.template_innerhtml&&(l.innerHTML=this.header(i)),document.createElement("dd"));n.textContent=t[i],this.template_innerhtml&&(n.innerHTML=t[i]),o.appendChild(l),o.appendChild(n)}return r&&s.appendChild(r),s.appendChild(o),s.outerHTML};icon=(e="azul")=>new L.icon({iconUrl:`https://www.argentina.gob.ar/sites/default/files/marcador-${e}.svg`,iconSize:[27,38],iconAnchor:[13,38],popupAnchor:[0,-37]});resetView=()=>this.map.setView(this.map_view,this.map_zoom);resetViewButton=()=>{this.reset_zoom&&(document.querySelectorAll(this.scope_selector+" .js-reset-view").forEach(e=>e.remove()),document.querySelectorAll(this.scope_selector+" .leaflet-control-zoom-in").forEach(e=>{const t=document.createElement("i"),a=(t.classList.add("fa","fa-expand"),t.setAttribute("aria-hidden","true"),document.createElement("a"));a.classList.add("js-reset-view","leaflet-control-zoom-reset"),a.href="#",a.title="Ver todo el mapa",a.appendChild(t),a.onclick=e=>{e.preventDefault(),this.resetView()},e.after(a)}))};marker=e=>{var t;return this.marker_color&&"boolean"!=typeof this.marker_color?"string"==typeof this.marker_color?this.icon(this.marker_color):"string"==typeof this.marker_color(this,e)?(t=this.marker_color(this,e),this.icon(t)):"function"==typeof this.marker_color?this.marker_color(this,e):void 0:null};markersMap=e=>{e.forEach(t=>{var a=this.marker(t),r=t[this.id],s=t[this.latitud],o=t[this.longitud];if(this.validateLatLng(s)&&this.validateLatLng(o)){let e={};r&&(e.id=r),a&&(e.icon=a);const i=new L.marker([s,o],e);this.markers.addLayer(i),this.slider||(r="function"==typeof this.template?this.template(this,t):this.defaultTemplate(this,t),i.bindPopup(r))}}),this.map.options.minZoom=2,this.map.addLayer(this.markers)};setSelectedMarker=(e,t)=>{e={entry:this.entry(e),marker:t};return this.selected_marker=e};selectedMarker=()=>{this.markers.eachLayer(t=>{t.on("click",e=>{this.setSelectedMarker(t.options.id,t)})})};render=()=>{this.resetViewButton(),this.markersMap(this.entries),this.selectedMarker(),this.slider&&(this.renderSlider(),this.clickeableMarkers(),this.clickToggleSlider()),this.hash&&this.urlHash(),this.scroll&&this.hasHash()&&this.scrollCenter(),setTimeout(this.gotoHashedEntry,this.anchor_delay)}}class PonchoMapFilter extends PonchoMap{constructor(e,t){super(e,t);e=Object.assign({},{filters:{},filters_visible:!1},t);this.filters=e.filters,this.filters_visible=e.filters_visible,this.valid_fields=["checkbox","radio"]}filterPosition=e=>{e=/(?:__([0-9]+))(?:__([0-9]+))?$/gm.exec(e);return e?parseInt(e[1]):null};toggleFilter=()=>document.querySelector(this.scope_selector+" .js-poncho-map-filters").classList.toggle("filter--in");filterContainerHeight=()=>{var e=document.querySelector(this.scope_selector+" .js-filter-container"),t=document.querySelector(this.scope_selector+" .js-close-filter"),e=e.offsetParent.offsetHeight-e.offsetTop-t.offsetHeight-20;const a=document.querySelector(this.scope_selector+" .js-poncho-map-filters");a.style.maxHeight=e+"px";t=a.offsetHeight-45;document.querySelector(this.scope_selector+" .js-filters").style.height=t+"px"};clickToggleFilter=()=>document.querySelectorAll(this.scope_selector+" .js-close-filter").forEach(e=>e.addEventListener("click",e=>{e.preventDefault(),this.toggleFilter(),this.filterContainerHeight()}));fields=(e,t)=>{const a=document.createElement("div");a.classList.add("field-list","p-b-1");for(const o in e.fields){var r=e.fields[o];const i=document.createElement("input"),l=(i.type=this.valid_fields.includes(e.type)?e.type:"checkbox",i.id=`id__${r[0]}__${t}__`+o,"radio"==e.type?i.name=r[0]+"__"+t:i.name=r[0]+`__${t}__`+o,i.className="form-check-input",i.value=o,void 0!==r[3]&&"checked"==r[3]&&i.setAttribute("checked","checked"),document.createElement("label")),n=(l.style.marginLeft=".33rem",l.textContent=r[1],l.className="form-check-label",l.setAttribute("for",`id__${r[0]}__${t}__`+o),document.createElement("div"));n.className="form-check",n.appendChild(i),n.appendChild(l),a.appendChild(n)}const s=document.createElement("div");return s.appendChild(a),s};filterButton=()=>{const e=document.createElement("i"),t=(e.setAttribute("aria-hidden","true"),e.classList.add("fa","fa-filter"),document.createElement("span")),a=(t.textContent="Filtrar",t.classList.add("sr-only"),document.createElement("button")),r=(a.title="Filtrar elementos en el mapa",a.classList.add("btn","btn-secondary","btn-filter","js-close-filter"),a.appendChild(e),a.appendChild(t),document.createElement("div")),s=(r.classList.add("js-filter-container","filter-container"),this.reset_zoom&&r.classList.add("filter-container--zoom-expand"),r.appendChild(a),document.querySelector(".poncho-map"+this.scope_selector));s.appendChild(r)};filterContainer=()=>{const e=document.createElement("div"),t=(e.className="js-filters",document.createElement("button")),a=(t.classList.add("btn","btn-xs","btn-secondary","btn-close","js-close-filter"),t.setAttribute("title","Cerrar panel"),t.innerHTML='<span class="sr-only">Cerrar </span>✕',document.createElement("form")),r=(a.classList.add("js-formulario"),a.appendChild(t),a.appendChild(e),document.createElement("div"));r.classList.add("js-poncho-map-filters","poncho-map-filters"),this.filters_visible&&r.classList.add("filter--in"),r.appendChild(a),document.querySelector(this.scope_selector+" .js-filter-container").appendChild(r)};createFilters=e=>{const s=document.querySelector(this.scope_selector+" .js-filters");e.forEach((e,t)=>{let a=document.createElement("legend"),r=(a.textContent=e.legend,a.classList.add("m-b-1","text-primary","h6"),document.createElement("fieldset"));r.appendChild(a),r.appendChild(this.fields(e,t)),s.appendChild(r)})};formFilters=()=>{var e=document.querySelector(this.scope_selector+" .js-formulario"),e=new FormData(e);return Array.from(e).map(e=>[this.filterPosition(e[0]),parseInt(e[1])])};countOccurrences=(e,a,r)=>e.reduce((e,t)=>a.some(e=>t[r].includes(e))?e+1:e,0);totals=()=>{return this.formFilters().map(e=>{var t=this.filters[e[0]].fields[e[1]];return[t[1],this.countOccurrences(this.filtered_entries,t[2],t[0]),...e]})};filterData=()=>{this.markers.clearLayers();const c=this.formFilters();let e=this.entries.filter(t=>{let e=[],a=[];for(const i of c){[r,s]=i;const l=this.filters[r].fields[s],n=l[2];var r=void 0!==l[4]&&"strict"===l[4],s=n.some(e=>t[l[0]].includes(e));(r?e:a).push(s)}let o=[];if(0<a.length&&o.push(a.some(e=>e)),0<e.length&&o.push(e.every(e=>e)),o.every(e=>e))return t});return e=0<c.length?e:[],this.filtered_entries=e};filteredData=()=>{var e=this.filterData();this.markersMap(e),this.selectedMarker(),this.slider&&(this.renderSlider(),this.clickeableMarkers(),this.clickToggleSlider()),this.hash&&this.urlHash()};filterListener=()=>document.querySelectorAll(this.scope_selector+" .js-filters input").forEach(e=>e.addEventListener("change",this.filteredData));render=()=>{this.resetViewButton(),this.filterButton(),this.filterContainer(),this.createFilters(this.filters),this.clickToggleFilter(),this.filteredData(),this.scroll&&this.hasHash()&&this.scrollCenter(),this.filterListener(),setTimeout(this.gotoHashedEntry,this.anchor_delay),this.filters_visible&&this.filterContainerHeight()}}class PonchoMapSearch{constructor(e,t){this.data=e;e=Object.assign({},{scope:!1,text:"text",id:"id",template:!1,allow_clear:!0,placeholder:"Su búsqueda",theme:"poncho",minimum_input_length:0,search_fields:[],sort:!0,sort_reverse:!1,sort_key:"text"},t);this.theme=e.theme,this.template="function"==typeof e.template&&e.template,this.text=e.text,this.id=e.id,this.placeholder=e.placeholder,this.allow_clear=e.allow_clear,this.search_fields=e.search_fields,this.scope=e.scope,this.sort_key=e.sort_key,this.minimum_input_length=e.minimum_input_length,this.sort=e.sort,this.sort_reverse=e.sort_reverse,this.search_scope_selector=this.scope?`[data-scope="${this.scope}"]`:""}removeAccents=e=>e?e.replace(/έ/g,"ε").replace(/[ύϋΰ]/g,"υ").replace(/ό/g,"ο").replace(/ώ/g,"ω").replace(/ά/g,"α").replace(/[ίϊΐ]/g,"ι").replace(/ή/g,"η").replace(/\n/g," ").replace(/[áÁ]/g,"a").replace(/[éÉ]/g,"e").replace(/[íÍ]/g,"i").replace(/[óÓ]/g,"o").replace(/[Öö]/g,"o").replace(/[úÚ]/g,"u").replace(/ê/g,"e").replace(/î/g,"i").replace(/ô/g,"o").replace(/è/g,"e").replace(/ï/g,"i").replace(/ü/g,"u").replace(/ã/g,"a").replace(/õ/g,"o").replace(/ç/g,"c").replace(/ì/g,"i"):"";sortData=(e,r)=>{let t=e.sort((e,t)=>{var a=e=>this.removeAccents(e).toUpperCase();return a(e[r])<a(t[r])?-1:a(e[r])>a(t[r])?1:0});return this.sort_reverse?t.reverse():t};matcher=(e,t)=>{if(void 0===e.term||""===e.term.toString().trim())return t;for(const r of["text",...this.search_fields].filter(e=>e))if(t.hasOwnProperty(r)){var a=this.removeAccents(e.term).toUpperCase();const s=this.removeAccents(t[r]).toString().toUpperCase();try{if(s.includes(a))return t}catch(e){console.error(e)}}return null};dataSelect=e=>e.map(e=>{let t={id:e[this.id],text:e[this.text]};return t.html=this.template?this.template(this,e):e[this.text],{...e,...t,selected:!1}});selectTwo=()=>{var e=this.data instanceof PonchoMapFilter?this.data.filtered_entries:this.data.entries;let t=this.dataSelect(this.sortData(e,this.sort_key));this.sort||(t=this.dataSelect(e));jQuery(".poncho-map-search"+this.search_scope_selector).select2({data:t,matcher:this.matcher,tags:!0,allowClear:this.allow_clear,theme:this.theme,minimumInputLength:this.minimum_input_length,placeholder:this.placeholder,escapeMarkup:function(e){return e},templateResult:function(e){return e.html},templateSelection:function(e){return e.text}}).on("select2:select",e=>{this.data.gotoEntry(e.params.data.id)}).on("select2:open",()=>{document.querySelectorAll(".select2-search__field").forEach(e=>e.focus())})};firstEmptyOption=()=>document.querySelectorAll(".poncho-map-search"+this.search_scope_selector).forEach(e=>{e.innerHTML="",e.appendChild(document.createElement("option"))});change=()=>document.querySelectorAll(this.data.scope_selector+" .js-formulario input").forEach(e=>{e.addEventListener("change",()=>{this.selectTwo()})});render=()=>{this.firstEmptyOption(),this.selectTwo(),this.change()}}class GapiSheetData{constructor(e){e=Object.assign({},{gapi_key:"AIzaSyAll9EH1aTmZDewNSyM_CU_AIsGOiEDyZs"},e);this.gapi_key=e.gapi_key}url=(e,t)=>["https://sheets.googleapis.com/v4/spreadsheets/",t,"/values/",e,"?key=",this.gapi_key,"&alt=json"].join("");json_data=e=>{e=this.feed(e);return{feed:e,entries:this.entries(e),headers:this.headers(e)}};feed=e=>{const s=e.values[0],o=/ |\/|_/gi;let i=[];return e.values.forEach((t,e)=>{if(0<e){let e={};for(var a in s){var r=t.hasOwnProperty(a)?t[a].trim():"";e[""+s[a].toLowerCase().replace(o,"")]=r}i.push(e)}}),i};gapi_feed_row=(e,t="-",a=!0)=>{const r=a?"filtro-":"",s=Object.entries(e);let o={};return s.map(e=>o[(e=>e.replace("gsx$","").replace(r,"").replace(/-/g,t))(e[0])]=e[1].$t),o};entries=e=>e.filter((e,t)=>0<t);headers=e=>e.find((e,t)=>0==t)}async function fetch_json(e,t="GET"){const a=await fetch(e,{method:t,headers:{Accept:"application/json","Content-Type":"application/json"}});if(a.ok)return a.json();throw new Error("HTTP error! status: "+a.status)}