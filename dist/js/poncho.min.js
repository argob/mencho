function ponchoTable(o){var l,t,c=[],d=[],r=[],p=[],s="",h=[],u="";function a(e){jQuery.getJSON(e,function(e){function t(e){return e.replace(/έ/g,"ε").replace(/[ύϋΰ]/g,"υ").replace(/ό/g,"ο").replace(/ώ/g,"ω").replace(/ά/g,"α").replace(/[ίϊΐ]/g,"ι").replace(/ή/g,"η").replace(/\n/g," ").replace(/[áÁ]/g,"a").replace(/[éÉ]/g,"e").replace(/[íÍ]/g,"i").replace(/[óÓ]/g,"o").replace(/[úÚ]/g,"u").replace(/ê/g,"e").replace(/î/g,"i").replace(/ô/g,"o").replace(/è/g,"e").replace(/ï/g,"i").replace(/ü/g,"u").replace(/ã/g,"a").replace(/õ/g,"o").replace(/ç/g,"c").replace(/ì/g,"i")}c=e.values,jQuery.each(Object.keys(c[0]),function(e,t){c[0][t]&&(d.push(c[0][t]),r.push(t),s+="<th>"+c[1][t]+"</th>",h.push(c[1][t]))}),jQuery("#ponchoTable caption").html(o.tituloTabla),jQuery("#ponchoTable thead tr").empty(),jQuery("#ponchoTable thead tr").append(s),jQuery.each(c,function(s,e){var i,n;1<s&&(n=i="",jQuery.each(d,function(e,t){var a,o="",r=c[s][e];d[e].includes("btn-")&&r&&(r='<a aria-label="'+(a=c[0][e].replace("btn-","").replace("-"," "))+'" class="btn btn-primary btn-sm margin-btn" target="_blank" href="'+r+'">'+a+"</a>"),d[e].includes("filtro-")&&r&&(l=e,a=c[1][e],jQuery("#tituloFiltro").html(a),p.push(r)),d[e].includes("fecha-")&&r&&(a=r.split("/"),r='<span style="display:none;">'+new Date(a[2],a[1]-1,a[0]).toISOString().split("T")[0]+"</span>"+r),r||(r="",o="hidden-xs"),i+=r,r=(new showdown.Converter).makeHtml(r),n+='<td class="'+o+'" data-title="'+h[e]+'">'+r+"</td>"}),""!=i&&(u=(u+="<tr>")+n+"</tr>"))}),jQuery.each(p.filter(function(e,t,a){return t===a.indexOf(e)}),function(e,t){jQuery("#ponchoTableFiltro").append("<option>"+t+"</option>")}),jQuery("#ponchoTable tbody").empty(),jQuery("#ponchoTableSearchCont").show(),jQuery("#ponchoTable tbody").append(u),jQuery("#ponchoTable").removeClass("state-loading");var e=jQuery.fn.DataTable.ext.type.search,a=(e.string=function(e){return e?"string"==typeof e?t(e):e:""},e.html=function(e){return e?"string"==typeof e?t(e.replace(/<.*?>/g,"")):e:""},jQuery.isFunction(jQuery.fn.DataTable.ext.order.intl)&&(jQuery.fn.DataTable.ext.order.intl("es"),jQuery.fn.DataTable.ext.order.htmlIntl("es")),jQuery("#ponchoTable").DataTable({lengthChange:!1,autoWidth:!1,pageLength:o.cantidadItems,columnDefs:[{type:"html-num",targets:o.tipoNumero},{targets:o.ocultarColumnas,visible:!1}],ordering:o.orden,order:[[o.ordenColumna-1,o.ordenTipo]],dom:"<'row'<'col-sm-6'l><'col-sm-6'f>><'row'<'col-sm-12'i>><'row'<'col-sm-12'tr>><'row'<'col-md-offset-3 col-md-6 col-sm-offset-2 col-sm-8'p>>",language:{sProcessing:"Procesando...",sLengthMenu:"Mostrar _MENU_ registros",sZeroRecords:"No se encontraron resultados",sEmptyTable:"Ningún dato disponible en esta tabla",sInfo:"_TOTAL_ resultados",sInfoEmpty:"No hay resultados",sInfoFiltered:"",sInfoPostFix:"",sSearch:"Buscar:",sUrl:"",sInfoThousands:".",sLoadingRecords:"Cargando...",oPaginate:{sFirst:"<<",sLast:">>",sNext:">",sPrevious:"<"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente",paginate:{first:"Ir a la primera página",previous:"Ir a la página anterior",next:"Ir a la página siguiente",last:"Ir a la última página"}}}}));jQuery(document).ready(function(){jQuery("#ponchoTableSearch").keyup(function(){a.search(jQuery.fn.DataTable.ext.type.search.string(this.value)).draw()})}),jQuery("#ponchoTable_filter").parent().parent().remove(),1<jQuery("#ponchoTableFiltro option").length&&jQuery("#ponchoTableFiltroCont").show(),jQuery("#ponchoTableFiltro").on("change",function(){var e=jQuery.fn.DataTable.ext.type.search.string(jQuery(this).val());""!=e?a.column(l).every(function(){this.search(e?"^"+e+"$":"",!0,!1).draw()}):a.search("").columns().search("").draw()})})}jQuery.fn.DataTable.isDataTable("#ponchoTable")&&jQuery("#ponchoTable").DataTable().destroy(),o.jsonUrl?a(o.jsonUrl):(t=o.hojaNumero,jQuery.getJSON("https://sheets.googleapis.com/v4/spreadsheets/"+o.idSpread+"/?alt=json&key=AIzaSyCq2wEEKL9-6RmX-TkW23qJsrmnFHFf5tY",function(e){e=e.sheets[t-1].properties.title;a("https://sheets.googleapis.com/v4/spreadsheets/"+o.idSpread+"/values/"+e+"?alt=json&key=AIzaSyCq2wEEKL9-6RmX-TkW23qJsrmnFHFf5tY")}))}jQuery("#ponchoTable").addClass("state-loading");var content_popover=document.getElementById("content-popover");function popshow(){content_popover.classList.toggle("hidden")}function pophidde(){content_popover.classList.add("hidden")}var ponchoUbicacion=function(e){var a,o,r,s,t="/profiles/argentinagobar/themes/contrib/poncho/resources/jsons/geoprovincias.json",i="/profiles/argentinagobar/themes/contrib/poncho/resources/jsons/geolocalidades.json",n=jQuery('input[name="submitted['+e.provincia+']"]'),l=jQuery('input[name="submitted['+e.localidad+']"]');function c(e){return e.charAt(0).toUpperCase()+e.slice(1)}function d(e,t,a,o=!1,r=!1,s=!1){var i=jQuery("<select></select>").attr("id",t).attr("name",e).addClass("form-control form-select").prop("required",o);return r&&i.append("<option value=''>Seleccione una opción</option>"),jQuery.each(a,function(e,t){let a="";s==t.nombre&&(a='selected="selected"'),i.append("<option value='"+t.id+"' "+a+">"+t.nombre+"</option>")}),i}function p(e,t){var a=l.prop("required");return n.val()?d("sLocalidades","sLocalidades",e.filter(function(e){return String(e.provincia.id)==String(t)}).map(function(e){return e.departamento.nombre&&(e.nombre=c(e.departamento.nombre.toLowerCase())+" - "+c(e.nombre.toLowerCase())),e}).sort(function(e,t){e=e.nombre.toUpperCase(),t=t.nombre.toUpperCase();return e.localeCompare(t)}),a,emptyOption=!!l.val(),l.val()):d("sLocalidades","sLocalidades",[],a,!0,!1)}t=e.urlProvincias||t,i=e.urlLocalidades||i,jQuery.getJSON(t,function(e){var t;a=[],e.results.forEach(function(e,t){a.push(e)}),e=[],e=(t=a).sort(function(e,t){e=e.nombre.toUpperCase(),t=t.nombre.toUpperCase();return e.localeCompare(t)}),t=n.prop("required"),(r=d("sProvincias","sProvincias",e,t,!0,n.val())).on("change",function(e){var t;n.val(""),l.val(""),s.children("option:not(:first)").remove(),""!=r.val()&&(n.val(r.find(":selected").text()),t=p(o,r.val()).find("option"),s.append(t),s.val(""))}),n.after(r),jQuery(r).select2()}),jQuery.getJSON(i,function(e){o=[],e.results.forEach(function(e,t){o.push(e)}),(s=p(o,r.val())).on("change",function(e){l.val(""),""!=s.val()&&l.val(s.find(":selected").text())}),l.after(s),jQuery(s).select2()}),n.hide(),l.hide()};function ponchoChart(t){"use strict";var e;function ge(e){return"HeatMap"==e?"heatmap":"Mixed"==e?"mixed":"Stacked Bar"==e?"bar":"Horizontal Bar"==e?"horizontalBar":"Area"==e?"line":"Pie"==e?"pie":"Bar"==e?"bar":"Line"==e?"line":""}function _e(e){var t="";switch(e){case"celeste":t="#2897d4";break;case"verde":t="#2e7d33";break;case"rojo":t="#c62828";break;case"amarillo":t="#f9a822";break;case"azul":t="#0072bb";break;case"negro":t="#333";break;case"uva":t="#6a1b99";break;case"gris":t="#525252";break;case"grisintermedio":t="#f2f2f2";break;case"celesteargentina":t="#37bbed";break;case"fucsia":t="#ec407a";break;case"arandano":t="#c2185b";break;case"uva":t="#6a1b99";break;case"cielo":t="#039be5";break;case"verdin":t="#6ea100";break;case"lima":t="#cddc39";break;case"maiz":t="#ffce00";case"maíz":t="#ffce00";break;case"tomate":t="#ef5350";break;case"naranjaoscuro":t="#EF6C00";break;case"verdeazulado":t="#008388";break;case"escarapela":t="#2cb9ee";break;case"lavanda":t="#9284be";break;case"mandarina":t="#f79525";break;case"palta":t="#50b7b2";break;case"cereza":t="#ed3d8f";break;case"limon":t="#d7df23";break;case"verdejade":t="#066";break;case"verdealoe":t="#4fbb73";break;case"verdecemento":t="#b4beba";break;default:console.log("No existe color "+e)}return t}function ye(e){var e=e.toString().replace(".",","),t=e.split(","),a=new Intl.NumberFormat("es-AR",{maximumFractionDigits:2}).format(t[0]);return e=1<t.length?a.concat(",",t[1].substr(0,2)):a}function a(e,o){var F,N,t,q,a,r,z,B,P,s,i,D,H,n,l,R,U,Y,c,d,Z,p,$,h,W,u,m=[],f=[],b=[],J=[],g=[],_=[],y=[],v=[],k=0,C="",V=[],j=0,x=[],K=[],X=0,w=o.posicionLeyendas||"top",L="",L=void 0===o.mostrarLeyendas||o.mostrarLeyendas,T="",T=void 0===o.mostrarTotalStacked||o.mostrarTotalStacked,E=ge(o.tipoGrafico),I=e.values;if(jQuery.each(Object.keys(I[0]),function(e,t){var a;"eje-y"==I[0][e].substr(0,5)?(a=(a=I[0][e].split("-"))[0]+a[1],f.push(a),b.push(e)):"nombre-corto"==I[0][e]&&"heatmap"==E&&(X=e)}),jQuery.each(I,function(r,e){var o;0==r&&jQuery.each(b,function(e,t){var a=I[r][b[e]].split("-"),o=a[0]+a[1];y[o]=[],J.push(a[2]),"mixed"==E&&(3<a.length&&("barra"==a[3]||"linea"==a[3])?V.push(a[3]):(0==e&&V.push("barra"),1==e&&V.push("linea")))}),1==r&&jQuery.each(b,function(e,t){"pie"==E||"heatmap"==E?m.push(I[r][b[e]]):(_.push(I[r][b[e]]),k+=1)}),1<r&&(o=!1,jQuery.each(b,function(e,t){var a=I[0][b[e]].split("-"),a=a[0]+a[1];"pie"==E?y[a].push(I[r][b[e]]):"heatmap"==E?(0==o&&(_.push(I[r][0]),o=!0,k+=1),e!=X&&y[a].push(I[r][b[e]]),e+2==X&&(void 0===I[r][e+2]?K.push("*"):K.push(I[r][e+2]))):(0==o&&(m.push(I[r][0]),o=!0),y[a].push(I[r][b[e]]))}))}),"pie"==E?(F=[],jQuery.each(Object.keys(f),function(e,t){e=f[e];y.hasOwnProperty(e)&&F.push(y[e])}),v=F):1==k&&jQuery.each(Object.keys(f),function(e,t){e=f[e];y.hasOwnProperty(e)&&(v=y[e])}),"mixed"!=E||0<(N=o.porcentajesMixed||"").length&&(x=N.split(",")),C=1==o.porcentajes?"line"==E&&1<k?{enabled:!0,callbacks:{label:function(e,t){var a=ye(t.datasets[e.datasetIndex].data[e.index]);return t.datasets[e.datasetIndex].label+": "+a+"%"}},mode:"index",intersect:!1}:"pie"==E?{enabled:!0,callbacks:{label:function(e,t){var a=ye(t.datasets[e.datasetIndex].data[e.index]);return t.labels[e.index]+": "+a+"%"}}}:"Stacked Bar"==o.tipoGrafico?1==T?{enabled:!0,mode:"index",callbacks:{label:function(e,t){var a=ye(t.datasets[e.datasetIndex].data[e.index]);return t.datasets[e.datasetIndex].label+": "+a+"%"},footer:(e,t)=>{e=e.reduce((e,t)=>e+parseFloat(t.yLabel),0);return"Total: "+new Intl.NumberFormat("es-AR",{maximumFractionDigits:2}).format(e)+"%"}}}:{enabled:!0,mode:"index",callbacks:{label:function(e,t){var a=ye(t.datasets[e.datasetIndex].data[e.index]);return t.datasets[e.datasetIndex].label+": "+a+"%"}}}:{enabled:!0,mode:"index",callbacks:{label:function(e,t){var a=ye(t.datasets[e.datasetIndex].data[e.index]);return t.datasets[e.datasetIndex].label+": "+a+"%"}}}:"line"==E&&1<k?{enabled:!0,callbacks:{label:function(e,t){var a=ye(t.datasets[e.datasetIndex].data[e.index]);return t.datasets[e.datasetIndex].label+": "+a}},mode:"index",intersect:!1}:"pie"==E?{enabled:!0,callbacks:{label:function(e,t){var a=ye(t.datasets[e.datasetIndex].data[e.index]);return t.labels[e.index]+": "+a}}}:"Stacked Bar"==o.tipoGrafico&&1<k?1==T?{enabled:!0,mode:"index",intersect:!1,callbacks:{label:function(e,t){var a=ye(t.datasets[e.datasetIndex].data[e.index]);return t.datasets[e.datasetIndex].label+": "+a},footer:(e,t)=>{e=e.reduce((e,t)=>e+parseFloat(t.yLabel),0);return"Total: "+new Intl.NumberFormat("es-AR",{maximumFractionDigits:2}).format(e)}}}:{enabled:!0,mode:"index",intersect:!1,callbacks:{label:function(e,t){var a=ye(t.datasets[e.datasetIndex].data[e.index]);return t.datasets[e.datasetIndex].label+": "+a}}}:{enabled:!0,mode:"index",callbacks:{label:function(e,t){var a=ye(t.datasets[e.datasetIndex].data[e.index]);return t.datasets[e.datasetIndex].label+": "+a}}},"pie"==E&&(J.forEach(function(e,t,a){g.push(_e(e))}),console.log("etiquetas --\x3e "+m),console.log("datos --\x3e "+v),console.log("colores --\x3e "+g),N=m,T=v,P=E,s=g,t=o.idComponenteGrafico,D=w,H=C,i=L,t=document.getElementById(t),new Chart(t,{type:P,data:{labels:N,datasets:[{data:T,borderColor:s,backgroundColor:s,borderWidth:2}]},options:{legend:{display:i,position:D},responsive:!0,tooltips:H}})),1==k&&(console.log("etiquetas --\x3e "+m),console.log("datos --\x3e "+v),t=_e(J[0]),console.log("color --\x3e "+t),"Line"==o.tipoGrafico&&(P=m,T=v,s=E,i=t,D=_[0],H=o.ejeYenCero,n=o.idComponenteGrafico,l=w,R=C,U=L,n=document.getElementById(n),new Chart(n,{type:s,data:{labels:P,datasets:[{data:T,borderColor:i,backgroundColor:i,borderWidth:2,lineTension:0,fill:!1,label:D}]},options:{legend:{display:U,position:l},tooltips:R,responsive:!0,scales:{yAxes:[{ticks:{beginAtZero:H}}]}}})),"bar"!=E&&"Area"!=o.tipoGrafico||(n=m,T=v,U=E,l=t,R=_[0],q=o.ejeYenCero,a=o.idComponenteGrafico,r=w,z=C,B=L,a=document.getElementById(a),new Chart(a,{type:U,data:{labels:n,datasets:[{data:T,borderColor:l,backgroundColor:l,borderWidth:2,lineTension:0,label:R}]},options:{legend:{display:B,position:r},tooltips:z,responsive:!0,scales:{yAxes:[{ticks:{beginAtZero:q}}]}}})),"horizontalBar"==E&&(a=m,T=v,B=E,r=t,z=_[0],q=o.ejeYenCero,S=o.idComponenteGrafico,ie=w,ne=C,te=L,S=document.getElementById(S),new Chart(S,{type:B,data:{labels:a,datasets:[{data:T,borderColor:r,backgroundColor:r,borderWidth:2,lineTension:0,label:z}]},options:{legend:{display:te,position:ie},tooltips:ne,responsive:!0,scales:{xAxes:[{ticks:{beginAtZero:q}}]}}}))),1<k)if("heatmap"==E)if(void 0!==o.heatMapColors&&""!=o.heatMapColors&&void 0!==o.heatMapColorsRange&&""!=o.heatMapColorsRange){for(var ee=[],S="labelFila",T="labelColumna",te="labelValor",ae=(void 0!==o.datosTooltip&&0<o.datosTooltip.length&&(void 0!==o.datosTooltip[0]&&void 0!==o.datosTooltip[0].labelFila&&(S=o.datosTooltip[0].labelFila),void 0!==o.datosTooltip[1]&&void 0!==o.datosTooltip[1].labelColumna&&(T=o.datosTooltip[1].labelColumna),void 0!==o.datosTooltip[2]&&void 0!==o.datosTooltip[2].labelValor&&(te=o.datosTooltip[2].labelValor)),jQuery.each(Object.keys(f),function(e,t){e=f[e];y.hasOwnProperty(e)&&(v=y[e],ee.push(v))}),[]),A=0;A<_.length;A++){for(var e=[],oe=0;oe<m.length;oe++){v={x:m[oe],y:parseInt(ee[oe][A])};e.push(v)}var re={name:("*"!=K[A]?K:_)[A],data:e};ae.push(re)}for(var se=[],A=0;A<o.heatMapColorsRange.length-1;A++){e={from:o.heatMapColorsRange[A],to:o.heatMapColorsRange[A+1],color:_e(o.heatMapColors[A])};se.push(e)}var ie="",ie=void 0===o.mostrarEjeY||o.mostrarEjeY;{var ne=ae;var Q=o.idComponenteGrafico;var le=_;var ce=se;var de=S;var pe=T;var he=te;var T=o.tituloGrafico;var G=ie;var ue=w;var me=L;Q=document.getElementById(Q),new ApexCharts(Q,{series:ne,chart:{height:650,type:"heatmap"},dataLabels:{enabled:!1},title:{text:T},tooltip:{custom:function({series:e,seriesIndex:t,dataPointIndex:a,w:o}){e=ye(e[t][a]);return'<div class="arrow_box"><span>'+de+": "+le[t]+"<br>"+pe+": "+o.globals.labels[a]+"<br>"+he+": "+e+"</span></div>"}},plotOptions:{heatmap:{shadeIntensity:.5,radius:0,useFillColorAsStroke:!1,colorScale:{ranges:ce}}},yaxis:{show:G},legend:{show:me,position:ue},responsive:[{breakpoint:1e3,options:{yaxis:{show:!1},legend:{show:me,position:"top"}}}]}).render();const be=document.getElementsByClassName("apexcharts-toolbar");for(let e=0;e<be.length;e++)be[e].style.display="none"}}else void 0!==o.heatMapColors&&""!=o.heatMapColors||console.log("Completar vector con valores para los colores"),void 0!==o.heatMapColorsRange&&""!=o.heatMapColorsRange||console.log("Completar vector con el rango de valores para los colores");else{var O=[],M=0,fe=(J.forEach(function(e,t,a){g.push(_e(e))}),console.log("colores --\x3e "+g),0);jQuery.each(Object.keys(f),function(e,t){var a,e=f[e];y.hasOwnProperty(e)&&(v=y[e],console.log("datos --\x3e "+v),"Line"==o.tipoGrafico?a={label:_[M],data:v,borderColor:g[M],fill:!1,borderWidth:2,lineTension:0,backgroundColor:g[M]}:"Bar"==o.tipoGrafico||"Area"==o.tipoGrafico||"Horizontal Bar"==o.tipoGrafico||"Stacked Bar"==o.tipoGrafico?a={label:_[M],data:v,borderColor:g[M],backgroundColor:g[M],borderWidth:2,lineTension:0}:"Mixed"==o.tipoGrafico&&("barra"==(e=V[fe])?a={label:_[M],data:v,backgroundColor:g[M],yAxisID:"left-y-axis",type:"bar"}:"linea"==e&&(a={label:_[M],data:v,borderColor:g[M],backgroundColor:g[M],type:"line",yAxisID:"right-y-axis",fill:!1})),O.push(a),M+=1,fe+=1)}),"mixed"==E&&(2==x.length?j=2:1==x.length?"eje-y1"==x[0]?j=0:"eje-y2"==x[0]&&(j=1):j=3),console.log("etiquetas --\x3e "+m),console.log("toltip --\x3e"+JSON.stringify(C)),"Stacked Bar"==o.tipoGrafico?(Q=m,T=E,ce=O,G=o.idComponenteGrafico,ue=o.ejeYenCero,me=w,x=C,W=L,G=document.getElementById(G),new Chart(G,{type:T,data:{labels:Q,datasets:ce},options:{legend:{display:W,position:me,labels:{textAlign:"center"}},tooltips:x,responsive:!0,scales:{yAxes:[{ticks:{beginAtZero:ue},stacked:!0}],xAxes:[{stacked:!0}]}}})):"Mixed"==o.tipoGrafico?(T=m,W="bar",x=O,c=o.idComponenteGrafico,d=o.ejeYenCero,Z=w,p=j,j=_[0],$=_[1],h=L,c=document.getElementById(c),new Chart(c,{type:W,data:{labels:T,datasets:x},options:{legend:{display:h,position:Z,labels:{textAlign:"center"}},tooltips:{enabled:!0,mode:"single",callbacks:{label:function(e,t){var a="",o=((2==p||e.datasetIndex==p)&&(a="%"),ye(e.yLabel));return t.datasets[e.datasetIndex].label+": "+o+" "+a}}},responsive:!0,scales:{yAxes:[{id:"left-y-axis",type:"linear",position:"left",ticks:{beginAtZero:d,callback:function(e){return e+(1!=p&&2!=p?"":"%")}},scaleLabel:{display:!0,labelString:$,fontColor:"black"}},{id:"right-y-axis",type:"linear",position:"right",ticks:{beginAtZero:d,callback:function(e){return e+(0!=p&&2!=p?"":"%")}},scaleLabel:{display:!0,labelString:j,fontColor:"black"}}]}}})):"Horizontal Bar"==o.tipoGrafico?(c=m,T=E,x=O,h=o.idComponenteGrafico,Z=o.ejeYenCero,$=w,d=C,j=L,h=document.getElementById(h),new Chart(h,{type:T,data:{labels:c,datasets:x},options:{legend:{display:j,position:$,labels:{textAlign:"center"}},tooltips:d,responsive:!0,maintainAspectRatio:!0,scales:{xAxes:[{ticks:{beginAtZero:Z}}]}}})):(T=m,x=E,j=O,u=o.idComponenteGrafico,Y=o.ejeYenCero,w=w,C=C,L=L,u=document.getElementById(u),new Chart(u,{type:x,data:{labels:T,datasets:j},options:{legend:{display:L,position:w,labels:{textAlign:"center"}},tooltips:C,responsive:!0,maintainAspectRatio:!0,scales:{yAxes:[{ticks:{beginAtZero:Y}}]}}}))}""!=o.tituloGrafico&&void 0!==o.tituloGrafico&&(u=o.idTagTituloGrafico,x=o.tituloGrafico,document.getElementById(u)&&(document.getElementById(u).innerHTML=x))}!function(e){var t=!1;(e.idSpread&&e.hojaNombre||e.jsonUrl||e.jsonInput)&&void 0!==e.tipoGrafico&&""!=e.tipoGrafico&&void 0!==e.idComponenteGrafico&&""!=e.idComponenteGrafico&&""!=ge(e.tipoGrafico)&&(t=!0);return t}(t)?(void 0!==t.idSpread&&""!=t.idSpread||console.log("Completar valor para la opción de Configuración idSpread"),void 0!==t.hojaNombre&&""!=t.hojaNombre||console.log("Completar valor para la opción de Configuración hojaNombre"),void 0!==t.tipoGrafico&&""!=t.tipoGrafico||console.log("Completar valor para la opción de Configuración tipoGrafico"),void 0!==t.idComponenteGrafico&&""!=t.idComponenteGrafico||console.log("Completar valor para la opción de Configuración idComponenteGrafico"),""==ge(t.tipoGrafico)&&console.log("Ingrese un tipo de gafico válido")):t.jsonInput?(console.log(t.jsonInput),a(jQuery.parseJSON(t.jsonInput),t)):(e=t.jsonUrl||"https://sheets.googleapis.com/v4/spreadsheets/"+t.idSpread+"/values/"+t.hojaNombre+"?alt=json&key=AIzaSyCq2wEEKL9-6RmX-TkW23qJsrmnFHFf5tY",jQuery.getJSON(e,function(e){a(e,t)}))}function gapi_legacy(e){const r=e.values[0],s=/ |\/|_/gi;let i=[];return e.values.forEach((t,e)=>{if(0<e){let e={};for(var a in r){var o=t.hasOwnProperty(a)?t[a].trim():"";e["gsx$"+r[a].toLowerCase().replace(s,"")]={$t:o}}i.push(e)}}),{feed:{entry:i}}}class PonchoMap{constructor(e,t){this.data=e;e=Object.assign({},{template:!1,template_structure:{},template_container_class_list:["info-container"],template_title_class_list:["h4","title","m-t-0"],template_dl_class_list:["definition-list"],template_innerhtml:!1,template_header:!1,scope:"",slider:!1,scroll:!1,hash:!1,headers:{},map_selector:"map",anchor_delay:0,slider_selector:".slider",slider_close_selector:".js-close-slider",map_view:[-40.44,-63.59],map_anchor_zoom:16,map_zoom:4,id:"id",latitud:"latitud",longitud:"longitud",marker:"azul",marker_cluster_options:{spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,zoomToBoundsOnClick:!0,maxClusterRadius:10,spiderfyDistanceMultiplier:1.5,spiderLegPolylineOptions:{weight:1,color:"#666",opacity:.5}}},t);this.scope=e.scope,this.template=e.template,this.template_structure=e.template_structure,this.template_title_class_list=e.template_title_class_list,this.template_dl_class_list=e.template_dl_class_list,this.template_container_class_list=e.template_container_class_list,this.template_innerhtml=e.template_innerhtml,this.template_header=e.template_header,this.map_selector=e.map_selector,this.headers=e.headers,this.hash=e.hash,this.scroll=e.scroll,this.map_view=e.map_view,this.anchor_delay=e.anchor_delay,this.map_zoom=e.map_zoom,this.map_anchor_zoom=e.map_anchor_zoom,this.marker_cluster_options=e.marker_cluster_options,this.marker_color=e.marker,this.id=e.id,this.latitud=e.latitud,this.longitud=e.longitud,this.slider=e.slider,this.slider_selector=this.selector_name(e.slider_selector),this.slider_close_selector=e.slider_close_selector,this.map=new L.map(this.map_selector,{preferCanvas:!0}).setView(this.map_view,this.map_zoom),new L.tileLayer("https://gis.argentina.gob.ar/osm/{z}/{x}/{y}.png",{attribution:'&copy; Contribuidores <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(this.map),this.markers=new L.markerClusterGroup(this.marker_cluster_options),this.scope_selector=`[data-scope="${this.scope}"]`}get json_data(){return this.data}entry=t=>this.json_data.find(e=>e[this.id]==t);selector_name=e=>e.replace(/^(\.|\#)/,"");scroll_center=()=>{const e=document.getElementById(this.map_selector);var t=e.getBoundingClientRect(),a=(e.offsetLeft+e.offsetWidth)/2,t=t.top+window.scrollY;window.scrollTo({top:t,left:a,behavior:"smooth"})};clear_content=()=>document.querySelector(this.scope_selector+" .js-content").innerHTML="";toggle_slider=()=>document.querySelector(this.scope_selector+" ."+this.slider_selector).classList.toggle(this.slider_selector+"--in");click_toggle_slider=()=>document.querySelectorAll(this.scope_selector+" "+this.slider_close_selector).forEach(e=>e.addEventListener("click",()=>{this.clear_content(),this.toggle_slider()}));is_open=()=>document.querySelector(this.scope_selector+" ."+this.slider_selector).classList.contains(this.slider_selector+"--in");set_content=e=>{this.is_open()||this.toggle_slider();e=this.template(this,e);document.querySelector(this.scope_selector+" .js-content").innerHTML=e};header=e=>this.headers.hasOwnProperty(e)?this.headers[e]:e;validateLatLng=t=>{t=t.toString().split(",");{let e=0;if(e<t.length)return!(isNaN(t[e])||t[e]<-127||75<t[e])}};render_slider=()=>{document.querySelectorAll(this.scope_selector+" .slider").forEach(e=>e.remove());let e=document.createElement("button"),t=(e.classList.add("btn","btn-xs","btn-secondary","btn-close",this.selector_name(this.slider_close_selector)),e.setAttribute("title","Cerrar panel"),e.innerHTML='<span class="sr-only">Cerrar</span>✕',document.createElement("div")),a=(t.classList.add("content-container"),document.createElement("div")),o=(a.classList.add("content","js-content"),t.appendChild(a),document.createElement("div"));o.classList.add("slider"),o.appendChild(e),o.appendChild(t),document.querySelector(""+this.scope_selector).appendChild(o)};show_slider=(e,t)=>{this.map.setView([t[this.latitud],t[this.longitud]],this.map_anchor_zoom),e.fireEvent("click")};show_popup=e=>{this.markers.zoomToShowLayer(e,()=>{e.__parent.spiderfy(),e.openPopup()})};has_hash=()=>{return window.location.hash.replace("#","")||!1};showitem=()=>{let t=this.has_hash();if(t){const a=this.entry(t);this.markers.eachLayer(e=>{e.options.id==t&&(this.slider&&this.hash?this.show_slider(e,a):this.show_popup(e))})}};clickeable_markers=()=>{this.markers.eachLayer(t=>{t.on("click",e=>{document.querySelectorAll(".marker--active").forEach(e=>e.classList.remove("marker--active")),e.sourceTarget._icon.classList.add("marker--active");e=this.json_data.find(e=>e[this.id]==t.options.id);this.set_content(e)})})};url_hash=()=>{this.markers.eachLayer(t=>{t.on("click",e=>{window.location.hash="#"+t.options.id})})};remove_list_element=(e,t)=>{t=e.indexOf(t);return-1<t&&e.splice(t,1),e};template_title=e=>{const t=this.template_structure;if(!t.hasOwnProperty("title")&&t.title.length<1)return!1;let a;if(this.template_header){const r=document.createElement("div");r.innerHTML=this.template_header(this,e),a=r}else(a=document.createElement("h1")).classList.add(...this.template_title_class_list),a.textContent=e[t.title];const o=document.createElement("header");return o.className="header",o.appendChild(a),o};template_list=e=>{const t=this.template_structure;var a=Object.keys(e);let o=a;if(t.hasOwnProperty("values")&&0<t.values.length)o=t.values;else if(t.hasOwnProperty("exclude")&&0<t.exclude.length)for(const r of t.exclude)o=this.remove_list_element(a,r);return o};default_template=(e,t)=>{var a=this.template_list(t),o=this.template_title(t);const r=document.createElement("article"),s=(r.classList.add(...this.template_container_class_list),document.createElement("dl"));s.classList.add(...this.template_dl_class_list),s.style.fontSize="1rem";for(const i of a)if(!t.hasOwnProperty(i)||t[i]){const n=document.createElement("dt"),l=(n.textContent=this.header(i),this.template_innerhtml&&(n.innerHTML=this.header(i)),document.createElement("dd"));l.textContent=t[i],this.template_innerhtml&&(l.innerHTML=t[i]),s.appendChild(n),s.appendChild(l)}return o&&r.appendChild(o),r.appendChild(s),r.outerHTML};icon=(e="azul")=>new L.icon({iconUrl:`https://www.argentina.gob.ar/sites/default/files/marcador-${e}.svg`,iconSize:[38,38],iconAnchor:[22,41],popupAnchor:[-3,-40]});marker=e=>{var t;return this.marker_color&&"boolean"!=typeof this.marker_color?"string"==typeof this.marker_color?this.icon(this.marker_color):"string"==typeof this.marker_color(this,e)?(t=this.marker_color(this,e),this.icon(t)):"function"==typeof this.marker_color?this.marker_color(this,e):void 0:null};markers_map=e=>{e.forEach(t=>{var a=this.marker(t),o=t[this.id],r=t[this.latitud],s=t[this.longitud];if(this.validateLatLng(r)&&this.validateLatLng(s)){let e={};o&&(e.id=o),a&&(e.icon=a);const i=new L.marker([r,s],e);this.markers.addLayer(i),this.slider||i.bindPopup(this.template(this,t))}}),this.map.options.minZoom=2,this.map.addLayer(this.markers)};render=()=>{this.markers_map(this.json_data),this.slider&&(this.render_slider(),this.clickeable_markers(),this.click_toggle_slider()),this.hash&&this.url_hash(),this.scroll&&this.has_hash()&&this.scroll_center(),setTimeout(this.showitem,this.anchor_delay)}}class PonchoMapFilter extends PonchoMap{constructor(e,t){super(e,t);e=Object.assign({},{filters:{},filters_visible:!1},t);this.filters=e.filters,this.filters_visible=e.filters_visible,this.filtered_entries=[]}filter_position=e=>{e=/(?:__([0-9]+))(?:__([0-9]+))?$/gm.exec(e);return e?parseInt(e[1]):null};toggle_filtro=()=>document.querySelector(this.scope_selector+" .js-poncho-map-filters").classList.toggle("filter--in");filter_container_height=()=>{var e=document.querySelector(this.scope_selector+" .js-poncho-map-filters").offsetHeight-45;document.querySelector(this.scope_selector+" .js-filters").style.height=e+"px"};click_toggle_filtro=()=>document.querySelectorAll(this.scope_selector+" .js-close-filter").forEach(e=>e.addEventListener("click",e=>{e.preventDefault(),this.toggle_filtro(),this.filter_container_height()}));fields=(e,t)=>{const a=document.createElement("div");a.classList.add("field-list","p-b-1");for(const s in e.fields){var o=e.fields[s];const i=document.createElement("input"),n=(i.type=e.type,i.id=`id__${o[0]}__${t}__`+s,"radio"==e.type?i.name=o[0]+"__"+t:i.name=o[0]+`__${t}__`+s,i.className="form-check-input",i.value=s,void 0!==o[3]&&"checked"==o[3]&&i.setAttribute("checked","checked"),document.createElement("label")),l=(n.style.marginLeft=".33rem",n.textContent=o[1],n.className="form-check-label",n.setAttribute("for",`id__${o[0]}__${t}__`+s),document.createElement("div"));l.className="form-check",l.appendChild(i),l.appendChild(n),a.appendChild(l)}const r=document.createElement("div");return r.appendChild(a),r};filter_button=()=>{const e=document.createElement("button"),t=(e.title="Filtrar elementos en el mapa",e.classList.add("btn","btn-secondary","btn-filter","js-close-filter"),e.innerHTML='<i class="fa fa-filter" aria-hidden="true"></i><span class="sr-only">Filtrar</span>',document.createElement("div")),a=(t.classList.add("js-filter-container","filter-container"),t.appendChild(e),document.querySelector(".poncho-map"+this.scope_selector));a.appendChild(t)};filter_container=()=>{const e=document.createElement("div"),t=(e.className="js-filters",document.createElement("button")),a=(t.classList.add("btn","btn-xs","btn-secondary","btn-close","js-close-filter"),t.setAttribute("title","Cerrar panel"),t.innerHTML='<span class="sr-only">Cerrar </span>✕',document.createElement("form")),o=(a.classList.add("js-formulario"),a.appendChild(t),a.appendChild(e),document.createElement("div"));o.classList.add("js-poncho-map-filters","poncho-map-filters"),this.filters_visible&&o.classList.add("filter--in"),o.appendChild(a),document.querySelector(this.scope_selector+" .js-filter-container").appendChild(o)};create_filters=e=>{const r=document.querySelector(this.scope_selector+" .js-filters");e.forEach((e,t)=>{let a=document.createElement("legend"),o=(a.textContent=e.legend,a.classList.add("m-b-1","text-primary","h6"),document.createElement("fieldset"));o.appendChild(a),o.appendChild(this.fields(e,t)),r.appendChild(o)})};form_filters=()=>{var e=document.querySelector(this.scope_selector+" .js-formulario"),e=new FormData(e);return Array.from(e).map(e=>[this.filter_position(e[0]),parseInt(e[1])])};count_occurrences=(e,a,o)=>e.reduce((e,t)=>a.some(e=>t[o].includes(e))?e+1:e,0);totals=()=>{return this.form_filters().map(e=>{var t=this.filters[e[0]].fields[e[1]];return[t[1],this.count_occurrences(this.filtered_entries,t[2],t[0]),...e]})};filter_data=()=>{this.markers.clearLayers();const c=this.form_filters();var e;return 0==c.length?[]:(e=this.json_data.filter(t=>{let e=[],a=[];for(const i of c){[o,r]=i;const n=this.filters[o].fields[r],l=n[2];var o=void 0!==n[4]&&"strict"===n[4],r=l.some(e=>t[n[0]].includes(e));(o?e:a).push(r)}let s=[];if(0<a.length&&s.push(a.some(e=>e)),0<e.length&&s.push(e.every(e=>e)),s.every(e=>e))return t}),this.filtered_entries=e)};filtered_data=()=>{var e=this.filter_data();this.markers_map(e),this.slider&&(this.render_slider(),this.clickeable_markers(),this.click_toggle_slider()),this.hash&&this.url_hash(),this.scroll&&this.has_hash()&&this.scroll_center()};filter_listener=()=>document.querySelectorAll(this.scope_selector+" .js-filters input").forEach(e=>e.addEventListener("change",this.filtered_data));render=()=>{this.filter_button(),this.filter_container(),this.create_filters(this.filters),this.click_toggle_filtro(),this.filtered_data(),this.filter_listener(),setTimeout(this.showitem,this.anchor_delay),this.filters_visible&&this.filter_container_height()}}class GapiSheetData{constructor(e){e=Object.assign({},{gapi_key:"AIzaSyAll9EH1aTmZDewNSyM_CU_AIsGOiEDyZs"},e);this.gapi_key=e.gapi_key}url=(e,t)=>["https://sheets.googleapis.com/v4/spreadsheets/",t,"/values/",e,"?key=",this.gapi_key,"&alt=json"].join("");json_data=e=>{e=this.feed(e);return{feed:e,entries:this.entries(e),headers:this.headers(e)}};feed=e=>{const r=e.values[0],s=/ |\/|_/gi;let i=[];return e.values.forEach((t,e)=>{if(0<e){let e={};for(var a in r){var o=t.hasOwnProperty(a)?t[a].trim():"";e[""+r[a].toLowerCase().replace(s,"")]=o}i.push(e)}}),i};gapi_feed_row=(e,t="-",a=!0)=>{const o=a?"filtro-":"",r=Object.entries(e);let s={};return r.map(e=>s[(e=>e.replace("gsx$","").replace(o,"").replace(/-/g,t))(e[0])]=e[1].$t),s};entries=e=>e.filter((e,t)=>0<t);headers=e=>e.find((e,t)=>0==t)}async function fetch_json(e,t="GET"){const a=await fetch(e,{method:t,headers:{Accept:"application/json","Content-Type":"application/json"}});if(a.ok)return a.json();throw new Error("HTTP error! status: "+a.status)}