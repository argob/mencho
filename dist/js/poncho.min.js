function ponchoTable(e){var t,a,o=[],s=[],r=[],n=[],i="",l=[],c="";function d(a){jQuery.getJSON(a,(function(a){o=a.values,jQuery.each(Object.keys(o[0]),(function(e,t){o[0][t]&&(s.push(o[0][t]),r.push(t),i+="<th>"+o[1][t]+"</th>",l.push(o[1][t]))})),jQuery("#ponchoTable caption").html(e.tituloTabla),jQuery("#ponchoTable thead tr").empty(),jQuery("#ponchoTable thead tr").append(i),jQuery.each(o,(function(e,a){if(e>1){var r="",i="";jQuery.each(s,(function(a,c){var d="",p=o[e][a];if(s[a].includes("btn-")&&p){var h=o[0][a].replace("btn-","").replace("-"," ");p='<a aria-label="'+h+'" class="btn btn-primary btn-sm margin-btn" target="_blank" href="'+p+'">'+h+"</a>"}if(s[a].includes("filtro-")&&p){t=a;var u=o[1][a];jQuery("#tituloFiltro").html(u),n.push(p)}if(s[a].includes("fecha-")&&p){var m=p.split("/");p='<span style="display:none;">'+new Date(m[2],m[1]-1,m[0]).toISOString().split("T")[0]+"</span>"+p}p||(p="",d="hidden-xs"),r+=p,p=(new showdown.Converter).makeHtml(p),i+='<td class="'+d+'" data-title="'+l[a]+'">'+p+"</td>"})),""!=r&&(c+="<tr>",c+=i,c+="</tr>")}})),jQuery.each(n.filter((function(e,t,a){return t===a.indexOf(e)})),(function(e,t){jQuery("#ponchoTableFiltro").append("<option>"+t+"</option>")})),jQuery("#ponchoTable tbody").empty(),jQuery("#ponchoTableSearchCont").show(),jQuery("#ponchoTable tbody").append(c),jQuery("#ponchoTable").removeClass("state-loading"),function(){function a(e){return e.replace(/έ/g,"ε").replace(/[ύϋΰ]/g,"υ").replace(/ό/g,"ο").replace(/ώ/g,"ω").replace(/ά/g,"α").replace(/[ίϊΐ]/g,"ι").replace(/ή/g,"η").replace(/\n/g," ").replace(/[áÁ]/g,"a").replace(/[éÉ]/g,"e").replace(/[íÍ]/g,"i").replace(/[óÓ]/g,"o").replace(/[úÚ]/g,"u").replace(/ê/g,"e").replace(/î/g,"i").replace(/ô/g,"o").replace(/è/g,"e").replace(/ï/g,"i").replace(/ü/g,"u").replace(/ã/g,"a").replace(/õ/g,"o").replace(/ç/g,"c").replace(/ì/g,"i")}var o=jQuery.fn.DataTable.ext.type.search;o.string=function(e){return e?"string"==typeof e?a(e):e:""},o.html=function(e){return e?"string"==typeof e?a(e.replace(/<.*?>/g,"")):e:""},jQuery.isFunction(jQuery.fn.DataTable.ext.order.intl)&&(jQuery.fn.DataTable.ext.order.intl("es"),jQuery.fn.DataTable.ext.order.htmlIntl("es"));var s=jQuery("#ponchoTable").DataTable({lengthChange:!1,autoWidth:!1,pageLength:e.cantidadItems,columnDefs:[{type:"html-num",targets:e.tipoNumero},{targets:e.ocultarColumnas,visible:!1}],ordering:e.orden,order:[[e.ordenColumna-1,e.ordenTipo]],dom:"<'row'<'col-sm-6'l><'col-sm-6'f>><'row'<'col-sm-12'i>><'row'<'col-sm-12'tr>><'row'<'col-md-offset-3 col-md-6 col-sm-offset-2 col-sm-8'p>>",language:{sProcessing:"Procesando...",sLengthMenu:"Mostrar _MENU_ registros",sZeroRecords:"No se encontraron resultados",sEmptyTable:"Ningún dato disponible en esta tabla",sInfo:"_TOTAL_ resultados",sInfoEmpty:"No hay resultados",sInfoFiltered:"",sInfoPostFix:"",sSearch:"Buscar:",sUrl:"",sInfoThousands:".",sLoadingRecords:"Cargando...",oPaginate:{sFirst:"<<",sLast:">>",sNext:">",sPrevious:"<"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente",paginate:{first:"Ir a la primera página",previous:"Ir a la página anterior",next:"Ir a la página siguiente",last:"Ir a la última página"}}}});jQuery(document).ready((function(){jQuery("#ponchoTableSearch").keyup((function(){s.search(jQuery.fn.DataTable.ext.type.search.string(this.value)).draw()}))})),jQuery("#ponchoTable_filter").parent().parent().remove(),jQuery("#ponchoTableFiltro option").length>1&&jQuery("#ponchoTableFiltroCont").show();jQuery("#ponchoTableFiltro").on("change",(function(){var e=jQuery.fn.DataTable.ext.type.search.string(jQuery(this).val());""!=e?s.column(t).every((function(){this.search(e?"^"+e+"$":"",!0,!1).draw()})):s.search("").columns().search("").draw()}))}()}))}jQuery.fn.DataTable.isDataTable("#ponchoTable")&&jQuery("#ponchoTable").DataTable().destroy(),e.jsonUrl?d(e.jsonUrl):(a=e.hojaNumero,jQuery.getJSON("https://sheets.googleapis.com/v4/spreadsheets/"+e.idSpread+"/?alt=json&key=AIzaSyCq2wEEKL9-6RmX-TkW23qJsrmnFHFf5tY",(function(t){var o=t.sheets[a-1].properties.title;d("https://sheets.googleapis.com/v4/spreadsheets/"+e.idSpread+"/values/"+o+"?alt=json&key=AIzaSyCq2wEEKL9-6RmX-TkW23qJsrmnFHFf5tY")})))}jQuery("#ponchoTable").addClass("state-loading");var opt={tipoMapa:"roadmap"};function ponchoMaps(e){var t,a={center:{lat:-39.6930895,lng:-57.2432742},zoom:5,mapTypeId:e.tipoMapa,styles:[{featureType:"administrative.country",stylers:[{visibility:"on"}]},{featureType:"poi",stylers:[{visibility:"off"}]}]},o=new google.maps.Map(document.getElementById("map"),a);jQuery.getJSON("https://spreadsheets.google.com/feeds/list/"+e.idSpreadheet+"/"+e.hojaNumero+"/public/values?alt=json",(function(a){var s=["metricas.mod@gmail.com","modernizacion.ux@gmail.com","contenidosgobar@gmail.com"];jQuery.each(a.feed.author,(function(e,t){-1==s.indexOf(t.email.$t)&&(jQuery("body").remove(),window.location.replace("http://www.argentina.gob.ar"))})),t=a.feed.entry;var r=[],n=[],i=['<?xml version="1.0"?>','<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="286.818px" height="396.798px" viewBox="63.14 8.15 286.818 396.798" enable-background="new 63.14 8.15 286.818 396.798" xml:space="preserve">','<path stroke="#FFF" stroke-width="10" fill="{{ color }}" d="M206.549,20.359L206.549,20.359c-74.459,0-134.584,60.126-134.584,134.584c0,25.961,8.293,50.751,19.832,71.122l87.71,151.801c5.499,9.916,16.586,14.874,27.043,14.874c10.458,0,21.003-4.958,27.043-14.874l87.71-151.711c11.629-20.373,19.832-44.712,19.832-71.124C341.133,80.574,281.008,20.359,206.549,20.359z M206.549,206.978c-33.804,0-61.41-27.606-61.41-61.41s27.606-61.41,61.41-61.41s61.41,27.606,61.41,61.41C267.959,179.484,240.353,206.978,206.549,206.978z"/>',"</svg>"].join("\n"),l={azul:{hex:"#0072BB"},verde:{hex:"#2E7D33"},rojo:{hex:"#C62828"},gris:{hex:"#707070"},fucsia:{hex:"#EC407A"},arandano:{hex:"#C2185B"},uva:{hex:"#6A1B99"},cielo:{hex:"#039BE5"},verdin:{hex:"#6EA100"},lima:{hex:"#CDDC39"},maiz:{hex:"#FFCE00"},tomate:{hex:"#EF5350"},"naranja oscuro":{hex:"#EF6C00"},"verde azulado":{hex:"#008388"}};jQuery.each(t,(function(t,a){var s=a.gsx$color.$t.toLowerCase(),d=i.replace("{{ color }}",l[s].hex),p=new google.maps.LatLng(a.gsx$latitud.$t,a.gsx$longitud.$t),h=new google.maps.Marker({position:p,title:a.gsx$nombre.$t,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(d),scaledSize:new google.maps.Size(40,40)},optimized:!1});r.push(h);var u="",m="",f="",g="",b="",v="";(""==a.gsx$provincia.$t&&""==a.gsx$localidad.$t||(b='<div class="separarGuiones"><i class="fa fa-map-marker"></i><span>'+a.gsx$direccion.$t+"</span><span>"+a.gsx$localidad.$t+"</span><span>"+a.gsx$provincia.$t+"</span></div>"),""!=a.gsx$telefono.$t&&(u="<div><i class='fa fa-phone'></i>"+a.gsx$telefono.$t+"</div>"),""!=a.gsx$email.$t&&(m="<div><i class='fa fa-envelope'></i>"+a.gsx$email.$t+"</div>"),""!=a.gsx$descripcion.$t)&&(g="<div>"+(new showdown.Converter).makeHtml(a.gsx$descripcion.$t)+"</div>");""!=a.gsx$boton.$t&&(f="<hr><a class='btn btn-success btn-sm' href="+a.gsx$boton.$t+">"+e.textoBoton+"</a>"),null!=a.gsx$foto&&(v='<img width="100%" src="'+a.gsx$foto.$t+'">'),n[t]=new google.maps.InfoWindow({content:'<div class="media"><div class="media-body"><small class="text-primary">'+a.gsx$tipo.$t+"</small><h4>"+a.gsx$nombre.$t+"</h4> "+v+g+b+u+m+f+"</div></div>",maxWidth:300}),r[t].addListener("click",(function(){c(),n[t].open(o,r[t])})),jQuery("#map-container").removeClass("state-loading"),h.setMap(o)}));var c=function(){for(var e=0;e<n.length;e++)n[e].close()};if("si"==e.agrupar)new MarkerClusterer(o,r,{enableRetinaIcons:!0,imageSizes:[20,30,40,50,60,70],maxZoom:10,gridSize:50,styles:[{textColor:"white",url:"https://www.argentina.gob.ar/sites/default/files/cluster_ponchomaps.png",width:45,height:45}]})}))}var content_popover=document.getElementById("content-popover");function popshow(){content_popover.classList.toggle("hidden")}function pophidde(){content_popover.classList.add("hidden")}var ponchoUbicacion=function(e){var t,a,o,s,r="/profiles/argentinagobar/themes/contrib/poncho/resources/jsons/geoprovincias.json",n="/profiles/argentinagobar/themes/contrib/poncho/resources/jsons/geolocalidades.json",i=jQuery('input[name="submitted['+e.provincia+']"]'),l=jQuery('input[name="submitted['+e.localidad+']"]');function c(e){return e.charAt(0).toUpperCase()+e.slice(1)}function d(e,t,a,o=!1,s=!1,r=!1){var n=jQuery("<select></select>").attr("id",t).attr("name",e).addClass("form-control form-select").prop("required",o);return s&&n.append("<option value=''>Seleccione una opción</option>"),jQuery.each(a,(function(e,t){let a="";r==t.nombre&&(a='selected="selected"'),n.append("<option value='"+t.id+"' "+a+">"+t.nombre+"</option>")})),n}function p(e,t){var a={},o=l.prop("required"),s=null;return i.val()?(a=e.filter((function(e){return String(e.provincia.id)==String(t)})).map((function(e){return e.departamento.nombre&&(e.nombre=c(e.departamento.nombre.toLowerCase())+" - "+c(e.nombre.toLowerCase())),e})).sort((function(e,t){var a=e.nombre.toUpperCase(),o=t.nombre.toUpperCase();return a.localeCompare(o)})),emptyOption=!!l.val(),s=d("sLocalidades","sLocalidades",a,o,emptyOption,l.val())):s=d("sLocalidades","sLocalidades",[],o,!0,!1),s}r=e.urlProvincias?e.urlProvincias:r,n=e.urlLocalidades?e.urlLocalidades:n,jQuery.getJSON(r,(function(e){t=function(e){return t=[],e.results.forEach((function(e,a){t.push(e)})),t}(e),o=function(e){var t=[];t=e.sort((function(e,t){var a=e.nombre.toUpperCase(),o=t.nombre.toUpperCase();return a.localeCompare(o)}));var a=i.prop("required");return d("sProvincias","sProvincias",t,a,!0,i.val())}(t),o.on("change",(function(e){if(i.val(""),l.val(""),s.children("option:not(:first)").remove(),""!=o.val()){i.val(o.find(":selected").text());var t=p(a,o.val()).find("option");s.append(t),s.val("")}})),i.after(o),jQuery(o).select2()})),jQuery.getJSON(n,(function(e){a=function(e){return a=[],e.results.forEach((function(e,t){a.push(e)})),a}(e),(s=p(a,o.val())).on("change",(function(e){l.val(""),""!=s.val()&&l.val(s.find(":selected").text())})),l.after(s),jQuery(s).select2()})),i.hide(),l.hide()};function ponchoChart(e){"use strict";if(function(e){var t=!1;(e.idSpread&&e.hojaNombre||e.jsonUrl||e.jsonInput)&&void 0!==e.tipoGrafico&&""!=e.tipoGrafico&&void 0!==e.idComponenteGrafico&&""!=e.idComponenteGrafico&&""!=a(e.tipoGrafico)&&(t=!0);return t}(e))if(e.jsonInput)console.log(e.jsonInput),r(jQuery.parseJSON(e.jsonInput),e);else{var t=e.jsonUrl?e.jsonUrl:"https://sheets.googleapis.com/v4/spreadsheets/"+e.idSpread+"/values/"+e.hojaNombre+"?alt=json&key=AIzaSyCq2wEEKL9-6RmX-TkW23qJsrmnFHFf5tY";jQuery.getJSON(t,(function(t){r(t,e)}))}else void 0!==e.idSpread&&""!=e.idSpread||console.log("Completar valor para la opción de Configuración idSpread"),void 0!==e.hojaNombre&&""!=e.hojaNombre||console.log("Completar valor para la opción de Configuración hojaNombre"),void 0!==e.tipoGrafico&&""!=e.tipoGrafico||console.log("Completar valor para la opción de Configuración tipoGrafico"),void 0!==e.idComponenteGrafico&&""!=e.idComponenteGrafico||console.log("Completar valor para la opción de Configuración idComponenteGrafico"),""==a(e.tipoGrafico)&&console.log("Ingrese un tipo de gafico válido");function a(e){var t="";return"Line"==e&&(t="line"),"Bar"==e&&(t="bar"),"Pie"==e&&(t="pie"),"Area"==e&&(t="line"),"Horizontal Bar"==e&&(t="horizontalBar"),"Stacked Bar"==e&&(t="bar"),"Mixed"==e&&(t="mixed"),"HeatMap"==e&&(t="heatmap"),t}function o(e){var t="";switch(e){case"celeste":t="#2897d4";break;case"verde":t="#2e7d33";break;case"rojo":t="#c62828";break;case"amarillo":t="#f9a822";break;case"azul":t="#0072bb";break;case"negro":t="#333";break;case"uva":case"uva":t="#6a1b99";break;case"gris":t="#525252";break;case"grisintermedio":t="#f2f2f2";break;case"celesteargentina":t="#37bbed";break;case"fucsia":t="#ec407a";break;case"arandano":t="#c2185b";break;case"cielo":t="#039be5";break;case"verdin":t="#6ea100";break;case"lima":t="#cddc39";break;case"maíz":t="#ffce00";break;case"tomate":t="#ef5350";break;case"naranjaoscuro":t="#EF6C00";break;case"verdeazulado":t="#008388";break;case"escarapela":t="#2cb9ee";break;case"lavanda":t="#9284be";break;case"mandarina":t="#f79525";break;case"palta":t="#50b7b2";break;case"cereza":t="#ed3d8f";break;case"limon":t="#d7df23";break;case"verdejade":t="#066";break;case"verdealoe":t="#4fbb73";break;case"verdecemento":t="#b4beba";break;default:console.log("No existe color "+e)}return t}function s(e){var t=e.toString().replace(".",","),a=t.split(","),o=new Intl.NumberFormat("es-AR",{maximumFractionDigits:2}).format(a[0]);return t=a.length>1?o.concat(",",a[1].substr(0,2)):o}function r(e,t){var r=[],n=[],i=[],l="",c=[],d=[],p=[],h=[],u=[],m=0,f="",g=[],b=0,v=[],y=[],_=0,x=t.posicionLeyendas?t.posicionLeyendas:"top",k="";k=void 0===t.mostrarLeyendas||t.mostrarLeyendas;var C="";C=void 0===t.mostrarTotalStacked||t.mostrarTotalStacked;var j,w,T=a(t.tipoGrafico),L=e.values;if(jQuery.each(Object.keys(L[0]),(function(e,t){if("eje-y"==L[0][e].substr(0,5)){var a=L[0][e].split("-"),o=a[0]+a[1];n.push(o),i.push(e)}else"nombre-corto"==L[0][e]&&"heatmap"==T&&(_=e)})),jQuery.each(L,(function(e,t){if(0==e&&jQuery.each(i,(function(t,a){var o=L[e][i[t]].split("-"),s=o[0]+o[1];h[s]=[],c.push(o[2]),"mixed"==T&&(o.length>3&&("barra"==o[3]||"linea"==o[3])?g.push(o[3]):(0==t&&g.push("barra"),1==t&&g.push("linea")))})),1==e&&jQuery.each(i,(function(t,a){"pie"!=T?"heatmap"==T?r.push(L[e][i[t]]):(p.push(L[e][i[t]]),m+=1):r.push(L[e][i[t]])})),e>1){var a=!1;jQuery.each(i,(function(t,o){var s=L[0][i[t]].split("-"),n=s[0]+s[1];"pie"==T?h[n].push(L[e][i[t]]):"heatmap"==T?(0==a&&(p.push(L[e][0]),a=!0,m+=1),t!=_&&h[n].push(L[e][i[t]]),t+2==_&&(void 0===L[e][t+2]?y.push("*"):y.push(L[e][t+2]))):(0==a&&(r.push(L[e][0]),a=!0),h[n].push(L[e][i[t]]))}))}})),"pie"==T){var $=[];jQuery.each(Object.keys(n),(function(e,t){var a=n[e];h.hasOwnProperty(a)&&$.push(h[a])})),u=$}else 1==m&&jQuery.each(Object.keys(n),(function(e,t){var a=n[e];h.hasOwnProperty(a)&&(u=h[a])}));if("mixed"==T){var E=t.porcentajesMixed?t.porcentajesMixed:"";E.length>0&&(v=E.split(","))}if(f=1==t.porcentajes?"line"==T&&m>1?{enabled:!0,callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex].data[e.index];return a=s(a),t.datasets[e.datasetIndex].label+": "+a+"%"}},mode:"index",intersect:!1}:"pie"==T?{enabled:!0,callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex].data[e.index];return a=s(a),t.labels[e.index]+": "+a+"%"}}}:"Stacked Bar"==t.tipoGrafico?1==C?{enabled:!0,mode:"index",callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex].data[e.index];return a=s(a),t.datasets[e.datasetIndex].label+": "+a+"%"},footer:(e,t)=>{let a=e.reduce(((e,t)=>e+parseFloat(t.yLabel)),0);return"Total: "+new Intl.NumberFormat("es-AR",{maximumFractionDigits:2}).format(a)+"%"}}}:{enabled:!0,mode:"index",callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex].data[e.index];return a=s(a),t.datasets[e.datasetIndex].label+": "+a+"%"}}}:{enabled:!0,mode:"index",callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex].data[e.index];return a=s(a),t.datasets[e.datasetIndex].label+": "+a+"%"}}}:"line"==T&&m>1?{enabled:!0,callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex].data[e.index];return a=s(a),t.datasets[e.datasetIndex].label+": "+a}},mode:"index",intersect:!1}:"pie"==T?{enabled:!0,callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex].data[e.index];return a=s(a),t.labels[e.index]+": "+a}}}:"Stacked Bar"==t.tipoGrafico&&m>1?1==C?{enabled:!0,mode:"index",intersect:!1,callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex].data[e.index];return a=s(a),t.datasets[e.datasetIndex].label+": "+a},footer:(e,t)=>{let a=e.reduce(((e,t)=>e+parseFloat(t.yLabel)),0);return"Total: "+new Intl.NumberFormat("es-AR",{maximumFractionDigits:2}).format(a)}}}:{enabled:!0,mode:"index",intersect:!1,callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex].data[e.index];return a=s(a),t.datasets[e.datasetIndex].label+": "+a}}}:{enabled:!0,mode:"index",callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex].data[e.index];return a=s(a),t.datasets[e.datasetIndex].label+": "+a}}},"pie"==T&&(c.forEach((function(e,t,a){d.push(o(e))})),console.log("etiquetas --\x3e "+r),console.log("datos --\x3e "+u),console.log("colores --\x3e "+d),function(e,t,a,o,s,r,n,i){const l=document.getElementById(s);new Chart(l,{type:a,data:{labels:e,datasets:[{data:t,borderColor:o,backgroundColor:o,borderWidth:2}]},options:{legend:{display:i,position:r},responsive:!0,tooltips:n}})}(r,u,T,d,t.idComponenteGrafico,x,f,k)),1==m&&(console.log("etiquetas --\x3e "+r),console.log("datos --\x3e "+u),l=o(c[0]),console.log("color --\x3e "+l),"Line"==t.tipoGrafico&&function(e,t,a,o,s,r,n,i,l,c){const d=document.getElementById(n);new Chart(d,{type:a,data:{labels:e,datasets:[{data:t,borderColor:o,backgroundColor:o,borderWidth:2,lineTension:0,fill:!1,label:s}]},options:{legend:{display:c,position:i},tooltips:l,responsive:!0,scales:{yAxes:[{ticks:{beginAtZero:r}}]}}})}(r,u,T,l,p[0],t.ejeYenCero,t.idComponenteGrafico,x,f,k),"bar"!=T&&"Area"!=t.tipoGrafico||function(e,t,a,o,s,r,n,i,l,c){const d=document.getElementById(n);new Chart(d,{type:a,data:{labels:e,datasets:[{data:t,borderColor:o,backgroundColor:o,borderWidth:2,lineTension:0,label:s}]},options:{legend:{display:c,position:i},tooltips:l,responsive:!0,scales:{yAxes:[{ticks:{beginAtZero:r}}]}}})}(r,u,T,l,p[0],t.ejeYenCero,t.idComponenteGrafico,x,f,k),"horizontalBar"==T&&function(e,t,a,o,s,r,n,i,l,c){const d=document.getElementById(n);new Chart(d,{type:a,data:{labels:e,datasets:[{data:t,borderColor:o,backgroundColor:o,borderWidth:2,lineTension:0,label:s}]},options:{legend:{display:c,position:i},tooltips:l,responsive:!0,scales:{xAxes:[{ticks:{beginAtZero:r}}]}}})}(r,u,T,l,p[0],t.ejeYenCero,t.idComponenteGrafico,x,f,k)),m>1)if("heatmap"==T)if(void 0!==t.heatMapColors&&""!=t.heatMapColors&&void 0!==t.heatMapColorsRange&&""!=t.heatMapColorsRange){var I=[],S="labelFila",A="labelColumna",Q="labelValor";void 0!==t.datosTooltip&&t.datosTooltip.length>0&&(void 0!==t.datosTooltip[0]&&void 0!==t.datosTooltip[0].labelFila&&(S=t.datosTooltip[0].labelFila),void 0!==t.datosTooltip[1]&&void 0!==t.datosTooltip[1].labelColumna&&(A=t.datosTooltip[1].labelColumna),void 0!==t.datosTooltip[2]&&void 0!==t.datosTooltip[2].labelValor&&(Q=t.datosTooltip[2].labelValor)),jQuery.each(Object.keys(n),(function(e,t){var a=n[e];h.hasOwnProperty(a)&&(u=h[a],I.push(u))}));for(var G=[],O=0;O<p.length;O++){e=[];for(var M=0;M<r.length;M++){u={x:r[M],y:parseInt(I[M][O])};e.push(u)}var z={name:"*"!=y[O]?y[O]:p[O],data:e};G.push(z)}var F=[];for(O=0;O<t.heatMapColorsRange.length-1;O++){e={from:t.heatMapColorsRange[O],to:t.heatMapColorsRange[O+1],color:o(t.heatMapColors[O])};F.push(e)}var B="";B=void 0===t.mostrarEjeY||t.mostrarEjeY,function(e,t,a,o,r,n,i,l,c,d,p,h){const u=document.getElementById(a);new ApexCharts(u,{series:t,chart:{height:650,type:"heatmap"},dataLabels:{enabled:!1},title:{text:c},tooltip:{custom:function({series:e,seriesIndex:t,dataPointIndex:a,w:r}){var c=e[t][a];return c=s(c),'<div class="arrow_box"><span>'+n+": "+o[t]+"<br>"+i+": "+r.globals.labels[a]+"<br>"+l+": "+c+"</span></div>"}},plotOptions:{heatmap:{shadeIntensity:.5,radius:0,useFillColorAsStroke:!1,colorScale:{ranges:r}}},yaxis:{show:d},legend:{show:h,position:p},responsive:[{breakpoint:1e3,options:{yaxis:{show:!1},legend:{show:h,position:"top"}}}]}).render();const m=document.getElementsByClassName("apexcharts-toolbar");for(let e=0;e<m.length;e++)m[e].style.display="none"}(0,G,t.idComponenteGrafico,p,F,S,A,Q,t.tituloGrafico,B,x,k)}else void 0!==t.heatMapColors&&""!=t.heatMapColors||console.log("Completar vector con valores para los colores"),void 0!==t.heatMapColorsRange&&""!=t.heatMapColorsRange||console.log("Completar vector con el rango de valores para los colores");else{var N=[],P=0;c.forEach((function(e,t,a){d.push(o(e))})),console.log("colores --\x3e "+d);var D=0;jQuery.each(Object.keys(n),(function(e,a){var o=n[e];if(h.hasOwnProperty(o)){if(u=h[o],console.log("datos --\x3e "+u),"Line"==t.tipoGrafico)var s={label:p[P],data:u,borderColor:d[P],fill:!1,borderWidth:2,lineTension:0,backgroundColor:d[P]};else if("Bar"==t.tipoGrafico||"Area"==t.tipoGrafico||"Horizontal Bar"==t.tipoGrafico||"Stacked Bar"==t.tipoGrafico)s={label:p[P],data:u,borderColor:d[P],backgroundColor:d[P],borderWidth:2,lineTension:0};else if("Mixed"==t.tipoGrafico){var r=g[D];if("barra"==r)s={label:p[P],data:u,backgroundColor:d[P],yAxisID:"left-y-axis",type:"bar"};else if("linea"==r)s={label:p[P],data:u,borderColor:d[P],backgroundColor:d[P],type:"line",yAxisID:"right-y-axis",fill:!1}}N.push(s),P+=1,D+=1}})),"mixed"==T&&(2==v.length?b=2:1==v.length?"eje-y1"==v[0]?b=0:"eje-y2"==v[0]&&(b=1):b=3),console.log("etiquetas --\x3e "+r),console.log("toltip --\x3e"+JSON.stringify(f)),"Stacked Bar"==t.tipoGrafico?function(e,t,a,o,s,r,n,i){const l=document.getElementById(o);new Chart(l,{type:t,data:{labels:e,datasets:a},options:{legend:{display:i,position:r,labels:{textAlign:"center"}},tooltips:n,responsive:!0,scales:{yAxes:[{ticks:{beginAtZero:s},stacked:!0}],xAxes:[{stacked:!0}]}}})}(r,T,N,t.idComponenteGrafico,t.ejeYenCero,x,f,k):"Mixed"==t.tipoGrafico?function(e,t,a,o,r,n,i,l,c,d){const p=document.getElementById(o);new Chart(p,{type:t,data:{labels:e,datasets:a},options:{legend:{display:d,position:n,labels:{textAlign:"center"}},tooltips:{enabled:!0,mode:"single",callbacks:{label:function(e,t){var a="";(2==i||e.datasetIndex==i)&&(a="%");var o=s(e.yLabel);return t.datasets[e.datasetIndex].label+": "+o+" "+a}}},responsive:!0,scales:{yAxes:[{id:"left-y-axis",type:"linear",position:"left",ticks:{beginAtZero:r,callback:function(e){var t="";return 1!=i&&2!=i||(t="%"),e+t}},scaleLabel:{display:!0,labelString:c,fontColor:"black"}},{id:"right-y-axis",type:"linear",position:"right",ticks:{beginAtZero:r,callback:function(e){var t="";return 0!=i&&2!=i||(t="%"),e+t}},scaleLabel:{display:!0,labelString:l,fontColor:"black"}}]}}})}(r,"bar",N,t.idComponenteGrafico,t.ejeYenCero,x,b,p[0],p[1],k):"Horizontal Bar"==t.tipoGrafico?function(e,t,a,o,s,r,n,i){const l=document.getElementById(o);new Chart(l,{type:t,data:{labels:e,datasets:a},options:{legend:{display:i,position:r,labels:{textAlign:"center"}},tooltips:n,responsive:!0,maintainAspectRatio:!0,scales:{xAxes:[{ticks:{beginAtZero:s}}]}}})}(r,T,N,t.idComponenteGrafico,t.ejeYenCero,x,f,k):function(e,t,a,o,s,r,n,i){const l=document.getElementById(o);new Chart(l,{type:t,data:{labels:e,datasets:a},options:{legend:{display:i,position:r,labels:{textAlign:"center"}},tooltips:n,responsive:!0,maintainAspectRatio:!0,scales:{yAxes:[{ticks:{beginAtZero:s}}]}}})}(r,T,N,t.idComponenteGrafico,t.ejeYenCero,x,f,k)}""!=t.tituloGrafico&&void 0!==t.tituloGrafico&&(j=t.idTagTituloGrafico,w=t.tituloGrafico,document.getElementById(j)&&(document.getElementById(j).innerHTML=w))}}function gapi_legacy(e){const t=e.values[0],a=/ |\/|_/gi;let o=[];return e.values.forEach(((e,s)=>{if(s>0){let s={};for(var r in t){var n=e.hasOwnProperty(r)?e[r].trim():"";s[`gsx$${t[r].toLowerCase().replace(a,"")}`]={$t:n}}o.push(s)}})),{feed:{entry:o}}}class PonchoMap{constructor(e,t){this.data=e;const a={template:(e,t)=>this.default_template(e,t),template_structure:{},template_container_class_list:["info-container"],template_title_class_list:["h4","title"],template_dl_class_list:["definition-list"],template_innerhtml:!1,scope:"",slider:!1,scroll:!1,hash:!1,headers:{},map_selector:"map",anchor_delay:0,slider_selector:".slider",slider_close_selector:".js-close-slider",map_view:[-40.44,-63.59],map_anchor_zoom:16,map_zoom:4,id:"id",latitud:"latitud",longitud:"longitud",marker:"azul",marker_cluster_options:{spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,zoomToBoundsOnClick:!0,maxClusterRadius:10,spiderfyDistanceMultiplier:1.5,spiderLegPolylineOptions:{weight:1,color:"#666",opacity:.5}}};let o=Object.assign({},a,t);this.scope=o.scope,this.template=o.template,this.template_structure=o.template_structure,this.template_title_class_list=o.template_title_class_list,this.template_dl_class_list=o.template_dl_class_list,this.template_container_class_list=o.template_container_class_list,this.template_innerhtml=o.template_innerhtml,this.map_selector=o.map_selector,this.headers=o.headers,this.hash=o.hash,this.scroll=o.scroll,this.map_view=o.map_view,this.anchor_delay=o.anchor_delay,this.map_zoom=o.map_zoom,this.map_anchor_zoom=o.map_anchor_zoom,this.marker_cluster_options=o.marker_cluster_options,this.marker_color=o.marker,this.id=o.id,this.latitud=o.latitud,this.longitud=o.longitud,this.slider=o.slider,this.slider_selector=this.selector_name(o.slider_selector),this.slider_close_selector=o.slider_close_selector,this.map=new L.map(this.map_selector,{preferCanvas:!0}).setView(this.map_view,this.map_zoom),new L.tileLayer("https://gis.argentina.gob.ar/osm/{z}/{x}/{y}.png",{attribution:'&copy; Contribuidores \n                        <a href="https://www.openstreetmap.org/copyright">\n                        OpenStreetMap</a>'}).addTo(this.map),this.markers=new L.markerClusterGroup(this.marker_cluster_options),this.scope_selector=`[data-scope="${this.scope}"]`}get json_data(){return this.data}entry=e=>this.json_data.find((t=>t[this.id]==e));selector_name=e=>e.replace(/^(\.|\#)/,"");scroll_center=()=>{const e=document.getElementById(this.map_selector),t=e.getBoundingClientRect(),a=(e.offsetLeft+e.offsetWidth)/2,o=t.top+window.scrollY;window.scrollTo({top:o,left:a,behavior:"smooth"})};toggle_slider=()=>document.querySelector(`${this.scope_selector} .${this.slider_selector}`).classList.toggle(`${this.slider_selector}--in`);click_toggle_slider=()=>document.querySelectorAll(`${this.scope_selector} ${this.slider_close_selector}`).forEach((e=>e.addEventListener("click",this.toggle_slider)));is_open=()=>document.querySelector(`${this.scope_selector} .${this.slider_selector}`).classList.contains(`${this.slider_selector}--in`);set_content=e=>{this.is_open()||this.toggle_slider();const t=this.template(this,e);document.querySelector(`.${this.slider_selector} .js-content-${this.token}`).innerHTML=t};header=e=>this.headers.hasOwnProperty(e)?this.headers[e]:e;validateLatLng=e=>{let t=e.toString().split(",");for(let e=0;e<t.length;e++)return!(isNaN(t[e])||t[e]<-127||t[e]>75)};render_slider=()=>{document.querySelectorAll(`${this.scope_selector} .slider`).forEach((e=>e.remove()));let e=document.createElement("button");e.classList.add("btn","btn-xs","btn-secondary","btn-close",this.selector_name(this.slider_close_selector)),e.setAttribute("title","Cerrar panel"),e.innerHTML='<span class="sr-only">Cerrar</span>✕';let t=document.createElement("div");t.classList.add("content-container");let a=document.createElement("div");a.classList.add("content",`js-content-${this.token}`),t.appendChild(a);let o=document.createElement("div");o.classList.add("slider"),o.appendChild(e),o.appendChild(t),document.querySelector(".poncho-map").appendChild(o)};show_slider=(e,t)=>{this.map.setView([t[this.latitud],t[this.longitud]],this.map_anchor_zoom),e.fireEvent("click")};show_popup=e=>{this.markers.zoomToShowLayer(e,(()=>{e.__parent.spiderfy(),e.openPopup()}))};showitem=()=>{let e=window.location.hash.replace("#","");if(!e)return;const t=this.entry(e);this.markers.eachLayer((a=>{a.options.id==e&&(this.slider?this.show_slider(a,t):this.show_popup(a))}))};clickeable_markers=()=>{this.markers.eachLayer((e=>{e.on("click",(t=>{const a=this.json_data.find((t=>t[this.id]==e.options.id));this.set_content(a)}))}))};url_hash=()=>{this.markers.eachLayer((e=>{e.on("click",(t=>{window.location.hash=`#${e.options.id}`}))}))};remove_list_element=(e,t)=>{const a=e.indexOf(t);return a>-1&&e.splice(a,1),e};template_title=e=>{const t=this.template_structure;if(t.hasOwnProperty("title")&&t.title.length>0){const a=document.createElement("h1");return a.classList.add(...this.template_title_class_list),a.textContent=e[t.title],a}return!1};template_list=e=>{const t=this.template_structure;let a=Object.keys(e),o=a;if(t.hasOwnProperty("values")&&t.values.length>0)o=t.values;else if(t.hasOwnProperty("exclude")&&t.exclude.length>0)for(const e of t.exclude)o=this.remove_list_element(a,e);return o};default_template=(e,t)=>{const a=this.template_list(t),o=this.template_title(t),s=document.createElement("article");s.classList.add(...this.template_container_class_list);const r=document.createElement("dl");r.classList.add(...this.template_dl_class_list),r.style.fontSize="1rem";for(const e of a){if(t.hasOwnProperty(e)&&!t[e])continue;const a=document.createElement("dt");a.textContent=this.header(e);const o=document.createElement("dd");o.textContent=t[e],this.template_innerhtml&&(o.innerHTML=t[e]),r.appendChild(a),r.appendChild(o)}return o&&s.appendChild(o),s.appendChild(r),s.outerHTML};icon=(e="azul")=>new L.icon({iconUrl:`https://www.argentina.gob.ar/sites/default/files/marcador-${e}.svg`,iconSize:[38,38],iconAnchor:[22,41],popupAnchor:[-3,-40]});marker=e=>{if(!this.marker_color||"boolean"==typeof this.marker_color)return null;if("string"==typeof this.marker_color)return this.icon(this.marker_color);if("string"==typeof this.marker_color(this,e)){const t=this.marker_color(this,e);return this.icon(t)}return"function"==typeof this.marker_color?this.marker_color(this,e):void 0};markers_map=e=>{e.forEach((e=>{const t=this.marker(e),a=e[this.id],o=e[this.latitud],s=e[this.longitud];if(!this.validateLatLng(o)&&!this.validateLatLng(s))return;let r={};a&&(r.id=a),t&&(r.icon=t);const n=new L.marker([o,s],r);this.markers.addLayer(n),!this.slider&&n.bindPopup(this.template(this,e))})),this.map.addLayer(this.markers)};render=()=>{this.markers_map(this.json_data),this.slider&&(this.render_slider(),this.clickeable_markers(),this.click_toggle_slider()),this.hash&&this.url_hash(),this.scroll&&this.scroll_center(),setTimeout(this.showitem,this.anchor_delay)}}async function fetch_json(e,t="GET"){const a=await fetch(e,{method:t,headers:{Accept:"application/json","Content-Type":"application/json"}});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}class PonchoMapFilter extends PonchoMap{constructor(e,t){super(e,t);let a=Object.assign({},{filters:{}},t);this.filters=a.filters}filter_position=e=>{const t=/__([0-9]+)$/gm.exec(e);return t?parseInt(t[1]):null};fields=e=>{const t=document.createElement("div");for(const a in e){const o=e[a],s=document.createElement("input");s.type="checkbox",s.id=`id__${o[0]}__${a}`,s.name=`${o[0]}__${a}`,s.className="form-check-input",s.value=1,void 0!==o[3]&&"checked"==o[3]&&s.setAttribute("checked","checked");const r=document.createElement("label");r.style.marginLeft=".33rem",r.textContent=o[1],r.className="form-check-label",r.setAttribute("for",`id__${o[0]}__${a}`);const n=document.createElement("div");n.className="form-check",n.appendChild(s),n.appendChild(r),t.appendChild(n)}const a=document.createElement("div");return a.appendChild(t),a};filter_container=()=>{const e=document.createElement("div");e.className="js-filters";const t=document.createElement("button");t.textContent="Filtrar",t.classList.add("js-poncho-map-filter","btn","btn-sm","btn-primary","m-t-1","m-b-0");const a=document.createElement("form");a.className="text-center",a.appendChild(t);const o=document.createElement("div");o.className="poncho-map-filters",o.appendChild(e),o.appendChild(a);const s=document.createElement("form");s.className="js-formulario",s.appendChild(o),document.querySelector(this.scope_selector).appendChild(s)};create_filters=e=>{const t=document.querySelector(`${this.scope_selector} .js-filters`);e.forEach((e=>{let a=document.createElement("legend");a.textContent=e.legend;let o=document.createElement("fieldset");o.appendChild(a),o.appendChild(this.fields(e.fields)),t.appendChild(o)}))};form_filters=()=>{const e=document.querySelector(`${this.scope_selector} .js-formulario`),t=new FormData(e);return Array.from(t).map((e=>this.filter_position(e[0])))};filter_data=()=>{this.markers.clearLayers();const e=this.form_filters();return this.json_data.filter((t=>{let a=[],o=[];for(const s of e){const e=this.filters[0].fields[s],r=e[2],n=void 0!==e[4]&&"strict"===e[4],i=!!r.includes(t[e[0]]);n?a.push(i):o.push(i)}let s=[];if(o.length>0&&s.push(o.some((e=>e))),a.length>0&&s.push(a.every((e=>e))),s.every((e=>e)))return t}))};filtered_data=()=>{const e=this.filter_data();this.markers_map(e),this.slider&&(this.render_slider(),this.clickeable_markers(),this.click_toggle_slider()),this.hash&&this.url_hash(),this.scroll&&this.scroll_center()};render=()=>{this.filter_container();document.querySelector(`${this.scope_selector} .js-poncho-map-filter`).addEventListener("click",(e=>{e.preventDefault(),this.filtered_data()})),this.create_filters(this.filters),this.filtered_data(),setTimeout(this.showitem,this.anchor_delay)}}async function fetch_json(e,t="GET"){const a=await fetch(e,{method:t,headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}class GapiSheetData{constructor(e){let t=Object.assign({},{gapi_key:"AIzaSyAll9EH1aTmZDewNSyM_CU_AIsGOiEDyZs"},e);this.gapi_key=t.gapi_key}url=(e,t)=>["https://sheets.googleapis.com/v4/spreadsheets/",t,"/values/",e,"?key=",this.gapi_key,"&alt=json"].join("");json_data=e=>{const t=this.feed(e);return{feed:t,entries:this.entries(t),headers:this.headers(t)}};feed=e=>{const t=e.values[0],a=/ |\/|_/gi;let o=[];return e.values.forEach(((e,s)=>{if(s>0){let s={};for(var r in t){var n=e.hasOwnProperty(r)?e[r].trim():"";s[`${t[r].toLowerCase().replace(a,"")}`]=n}o.push(s)}})),o};gapi_feed_row=(e,t="-",a=!0)=>{const o=a?"filtro-":"",s=Object.entries(e);let r={};return s.map((e=>{return r[(a=e[0],a.replace("gsx$","").replace(o,"").replace(/-/g,t))]=e[1].$t;var a})),r};entries=e=>e.filter(((e,t)=>t>0));headers=e=>e.find(((e,t)=>0==t))}